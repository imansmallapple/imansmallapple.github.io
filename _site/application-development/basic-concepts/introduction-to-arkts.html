<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(2)) > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Introduction to ArkTS | Oniro</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Introduction to ArkTS" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/application-development/basic-concepts/introduction-to-arkts.html" /> <meta property="og:url" content="http://localhost:4000/application-development/basic-concepts/introduction-to-arkts.html" /> <meta property="og:site_name" content="Oniro" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Introduction to ArkTS" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Introduction to ArkTS","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/introduction-to-oniro/images/ONIRO-Masterbrand-horizontal.png"}},"url":"http://localhost:4000/application-development/basic-concepts/introduction-to-arkts.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Oniro"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Eclipse Oniro Project category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/" class="nav-list-link">Eclipse Oniro Project</a><ul class="nav-list"><li class="nav-list-item"><a href="/introduction-to-oniro/introduction-to-oniro.html" class="nav-list-link">Introduction to Oniro</a></li><li class="nav-list-item"><a href="/introduction-to-oniro/oniro-architecture.html" class="nav-list-link">Oniro Architecture</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Application Development category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/" class="nav-list-link">Application Development</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Environment Setup Guide category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/environment-setup-config/" class="nav-list-link">Environment Setup Guide</a><ul class="nav-list"><li class="nav-list-item"> <a href="/application-development/environment-setup-config/system-requirement.html" class="nav-list-link">System Requirement</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/ide-installation.html" class="nav-list-link">IDE Installation</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/env-config.html" class="nav-list-link">Environment Configuration</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/full-public-sdk.html" class="nav-list-link">Full SDK & Public SDK</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/developer-account.html" class="nav-list-link">Developer Account</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/ohpm.html" class="nav-list-link">Introduction to OHPM</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/common-issue.html" class="nav-list-link">Common Issues and Solutions</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Create Your First Eclipse Oniro Application category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/create-first-eclipse-oniro-app/" class="nav-list-link">Create Your First Eclipse Oniro Application</a><ul class="nav-list"><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/create-template.html" class="nav-list-link">Create an Eclipse Oniro app using OpenHarmony Template</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/find-project-files.html" class="nav-list-link">Find project files</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/use-previewer.html" class="nav-list-link">Usage of Previewer</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/build-first-page.html" class="nav-list-link">Build the First Page</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/build-second-page.html" class="nav-list-link">Build the Second Page</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/page-redirect.html" class="nav-list-link">Implementing Page Redirection</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/run-real-device.html" class="nav-list-link">Running the Application on a Real Device</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Basic Concepts category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/basic-concepts/" class="nav-list-link">Basic Concepts</a><ul class="nav-list"><li class="nav-list-item"> <a href="/application-development/basic-concepts/app-pack-structure.html" class="nav-list-link">Application Package Structure in Stage Model</a> </li><li class="nav-list-item"> <a href="/application-development/basic-concepts/introduction-to-arkts.html" class="nav-list-link">Introduction to ArkTS</a> </li><li class="nav-list-item"> <a href="/application-development/basic-concepts/arkui-introduction.html" class="nav-list-link">Introduction to ArkUI</a> </li><li class="nav-list-item"> <a href="/application-development/basic-concepts/uiability-and-component.html" class="nav-list-link">UIAbility and Component</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Resource Categories and Access category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/resource-categories-and-access/" class="nav-list-link">Resource Categories and Access</a><ul class="nav-list"></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Device Development category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/device-development/" class="nav-list-link">Device Development</a><ul class="nav-list"><li class="nav-list-item"><a href="/device-development/quick-build-with-oniro.html" class="nav-list-link">Building Oniro</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Oniro IDE category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/device-development/oniro-ide/" class="nav-list-link">Oniro IDE</a><ul class="nav-list"><li class="nav-list-item"> <a href="/device-development/oniro-ide/getting-started.html" class="nav-list-link">Getting Started</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/code-editing.html" class="nav-list-link">Code Editing</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/user-interface.html" class="nav-list-link">User Interface</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/code-navigation.html" class="nav-list-link">Code Navigation</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/refacting.html" class="nav-list-link">Refactoring</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/language-support.html" class="nav-list-link">Language Support</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Supported Devices category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/device-development/supported-device/" class="nav-list-link">Supported Devices</a><ul class="nav-list"><li class="nav-list-item"> <a href="/device-development/supported-device/boards/" class="nav-list-link">boards</a> </li><li class="nav-list-item"> <a href="/device-development/supported-device/virtual-machine/" class="nav-list-link">virtual machine</a> </li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Policies and Compliance category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/policies-and-compliance/" class="nav-list-link">Policies and Compliance</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/community/" class="nav-list-link">Community</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Oniro" aria-label="Search Oniro" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/application-development/">Application Development</a></li> <li class="breadcrumb-nav-list-item"><a href="/application-development/basic-concepts/">Basic Concepts</a></li> <li class="breadcrumb-nav-list-item"><span>Introduction to ArkTS</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <p><strong>Content Table:</strong><br /> <a href="#introduction">Introduction</a> <br /> <a href="#basic-syntax-overview">Basic Syntax Overview</a><br /> <a href="#key-features">Key Features</a></p> <ul> <li><a href="#declarative-ui">Declarative UI</a></li> <li><a href="#componentization">Componentization</a> <ul> <li><a href="#basic-component">Basic Component</a></li> <li><a href="#custom-component">Custom Component</a></li> </ul> </li> <li><a href="#state-management">State Management</a> <ul> <li><a href="#basic-concepts">Basic Concepts</a></li> <li><a href="#decorator-overview">Decorator Overview</a> <ul> <li><a href="#decorators-for-component-state-management">Decorators for component state management</a></li> <li><a href="#decorators-for-application-state-management">Decorators for application state management</a></li> <li><a href="#other-state-management-features">Other State Management Features</a></li> </ul> </li> </ul> </li> <li><a href="#event-binding">Event Binding</a> <ul> <li><a href="#universal-events">Universal Events</a></li> <li><a href="#gesture-events">Gesture Events</a></li> </ul> </li> <li><a href="#rendering-control">Rendering Control</a> <ul> <li><a href="#overview">Overview</a></li> <li><a href="#ifelse-conditional-rendering">if/else: Conditional Rendering</a></li> <li><a href="#foreach-rendering-of-repeated-content">ForEach: Rendering of Repeated Content</a></li> </ul> </li> </ul> <p><a href="/application-development/arkts-basics">ArkTS Basics</a></p> <h1 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h1> <p>Welcome to the tutorial for ArkTS, a TypeScript-based programming language designed specifically to build high-performance mobile applications.</p> <p>ArkTS is optimized to provide better performance and efficiency, while still maintaining the familiar syntax of TypeScript.</p> <h1 id="basic-syntax-overview"> <a href="#basic-syntax-overview" class="anchor-heading" aria-labelledby="basic-syntax-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Syntax Overview </h1> <p><a href="https://gitee.com/openharmony/docs/blob/master/en/application-dev/quick-start/arkts-basic-syntax-overview.md">Text Source</a> With a basic understanding of the ArkTS language, let’s look into the composition of ArkTS through an example. As shown below, when the user clicks the button, the text content changes from Hello World to Hello ArkUI.</p> <p><strong>Figure 1</strong> Example effect drawing<br /> <img src="./images/image-basic/v1.gif" /></p> <p>In this example, the basic composition of ArkTS is as follows.</p> <p><strong>Figure 2</strong> Basic composition of ArkTS <img src="./images/image-basic/image3.png" /></p> <blockquote> <p><strong>NOTE</strong></p> <p>The name of a custom variable cannot be the same as that of any universal attribute or event.</p> </blockquote> <ul> <li><strong>Decorator</strong>: design pattern used to decorate classes, structs, methods, and variables to assign special meanings to them. In the preceding sample code, <code class="language-plaintext highlighter-rouge">@Entry</code>, <code class="language-plaintext highlighter-rouge">@Component</code>, and <code class="language-plaintext highlighter-rouge">@State</code> are decorators. <ul> <li><code class="language-plaintext highlighter-rouge">@Component</code> indicates a custom component</li> <li><code class="language-plaintext highlighter-rouge">@Entry</code> indicates that the custom component is an entry component</li> <li><code class="language-plaintext highlighter-rouge">@State</code> indicates a state variable in the component, whose change will trigger the UI to re-render.</li> </ul> </li> <li> <p><strong>UI description</strong>: declarative description of the UI structure, such as the code block of the <strong>build()</strong> method.</p> </li> <li> <p><strong>Custom component</strong>: reusable UI unit, which can be used with other components, such as the struct <strong>Hello</strong> decorated by @Component.</p> </li> <li> <p><strong>Built-in component</strong>: default basic or container component preset in ArkTS, which can be directly invoked, such as <strong>Column</strong>, <strong>Text</strong>, <strong>Divider</strong>, and <strong>Button</strong> components in the sample code.</p> </li> <li> <p><strong>Attribute method</strong>: method used to configure component attributes, such as <strong>fontSize()</strong>, <strong>width()</strong>, <strong>height()</strong>, and <strong>backgroundColor()</strong>. You can configure multiple attributes of a component in method chaining mode.</p> </li> <li><strong>Event method</strong>: method used to add the logic for a component to respond to an event. In the sample code, <strong>onClick()</strong> following <strong>Button</strong> is an event method. You can configure response logic for multiple events in method chaining mode.</li> </ul> <h1 id="key-features"> <a href="#key-features" class="anchor-heading" aria-labelledby="key-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Key Features </h1> <h2 id="declarative-ui"> <a href="#declarative-ui" class="anchor-heading" aria-labelledby="declarative-ui"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Declarative UI </h2> <p><a href="https://gitee.com/openharmony/docs/blob/master/en/application-dev/quick-start/arkts-declarative-ui-description.md">Text Source</a><br /> ArkTS declaratively combines and extends components to describe the UI of an application. It also provides basic methods for configuring attributes, events, and child components to help you implement application interaction logic.</p> <h3 id="creating-a-component"> <a href="#creating-a-component" class="anchor-heading" aria-labelledby="creating-a-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Component </h3> <p>Depending on the builder, you can create components with or without mandatory parameters.</p> <blockquote> <p><strong>NOTE</strong> The <strong>new</strong> operator is not required when you create a component.</p> </blockquote> <h4 id="without-mandatory-parameters"> <a href="#without-mandatory-parameters" class="anchor-heading" aria-labelledby="without-mandatory-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Without Mandatory Parameters </h4> <p>A struct without mandatory parameters is a component defined with empty parentheses. For example, the Divider component:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
  <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">item 1</span><span class="dl">'</span><span class="p">)</span>
  <span class="nc">Divider</span><span class="p">()</span>
  <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">item 2</span><span class="dl">'</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div> <h4 id="with-mandatory-parameters"> <a href="#with-mandatory-parameters" class="anchor-heading" aria-labelledby="with-mandatory-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With Mandatory Parameters </h4> <p>A struct with mandatory parameters is a component whose API definition expects parameters enclosed in parentheses.</p> <ul> <li> <p>Set the mandatory parameter <strong>src</strong> of the <strong>Image</strong> component as follows:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://xyz/test.jpg</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div> </div> </li> <li> <p>Set the optional parameter <strong>content</strong> of the <strong>Text</strong> component.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Parameter of the string type</span>
<span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">)</span>
<span class="c1">// Add application resources in $r format, which can be used in multi-language scenarios.</span>
<span class="nc">Text</span><span class="p">(</span><span class="nf">$r</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.string.title_value</span><span class="dl">'</span><span class="p">))</span>
<span class="c1">// No mandatory parameters</span>
<span class="nc">Text</span><span class="p">()</span>
</code></pre></div> </div> </li> <li> <p>You can also use variables or expressions to assign values to parameters. The result type returned by an expression must meet the parameter type requirements. For example, to set a variable or expression to construct the <strong>Image</strong> and <strong>Text</strong> components:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nc">Image</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">imagePath</span><span class="p">)</span>
  <span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://</span><span class="dl">'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">imageUrl</span><span class="p">)</span>
  <span class="nc">Text</span><span class="p">(</span><span class="s2">`count: </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
</code></pre></div> </div> </li> </ul> <h3 id="configuring-attributes"> <a href="#configuring-attributes" class="anchor-heading" aria-labelledby="configuring-attributes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring Attributes </h3> <p>Use chainable attribute methods to configure the style and other attributes of built-in components. It is recommended that a separate line be used for each attribute method.</p> <ul> <li> <p>Example of configuring the <strong>fontSize</strong> attribute for the <strong>Text</strong> component:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
</code></pre></div> </div> </li> <li> <p>Example of configuring multiple attributes for the <strong>Image</strong> component:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">test.jpg</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">alt</span><span class="p">(</span><span class="dl">'</span><span class="s1">error.jpg</span><span class="dl">'</span><span class="p">)</span>    
  <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>    
  <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div> </div> </li> <li> <p>Attribute methods accept expressions and variables as well constant parameters.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">)</span>
<span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">test.jpg</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">?</span> <span class="mi">100</span> <span class="p">:</span> <span class="mi">200</span><span class="p">)</span>    
  <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">offset</span> <span class="o">+</span> <span class="mi">100</span><span class="p">)</span>
</code></pre></div> </div> </li> <li> <p>For built-in components, ArkUI also predefines some enumeration types. These enumeration types can be passed as parameters, as long as they meet the parameter type requirements. Example of configuring the font color and style of the <strong>Text</strong> component:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">Red</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="nx">FontWeight</span><span class="p">.</span><span class="nx">Bold</span><span class="p">)</span>
</code></pre></div> </div> </li> </ul> <h3 id="handling-events"> <a href="#handling-events" class="anchor-heading" aria-labelledby="handling-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Handling Events </h3> <p>Use chainable event methods to configure events supported by built-in components. It is recommended that a separate line be used for each event method.</p> <ul> <li> <p>Example of using an arrow function expression to configure the event of a component:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">Click me</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">myText</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ArkUI</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">})</span>
</code></pre></div> </div> </li> <li> <p>Example of using an arrow function expression to configure the event of a component (<strong>() =&gt; {…}</strong> must be used to ensure that the function is bound to the component and complies with the ArkTS syntax specifications):</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">add counter</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">})</span>
</code></pre></div> </div> </li> <li> <p>Example of using a component’s member function to configure the event of the component, where <strong>this</strong> binding is needed: (This usage is not recommended in ArkTS.)</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">myClickHandler</span><span class="p">():</span> <span class="k">void</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">add counter</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">onClick</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">myClickHandler</span><span class="p">.</span><span class="nf">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
</code></pre></div> </div> </li> <li> <p>Example of using an arrow function expression for a declaration, where <strong>this</strong> binding is not needed:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fn</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="s2">`counter: </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">counter</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">counter</span><span class="o">++</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">add counter</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">onClick</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">fn</span><span class="p">)</span>
</code></pre></div> </div> </li> </ul> <blockquote> <p><strong>NOTE</strong> In arrow functions, <strong>this</strong> inherits its value from the surrounding (lexical) scope in which they are defined. This means that, in anonymous functions, <strong>this</strong> may present an unclear reference and is therefore not allowed in ArkTS.</p> </blockquote> <h3 id="configuring-child-components"> <a href="#configuring-child-components" class="anchor-heading" aria-labelledby="configuring-child-components"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring Child Components </h3> <p>For a component with child components, for example, a container component, add the UI descriptions of the child components inside parentheses. The <strong>Column</strong>, <strong>Row</strong>, <strong>Stack</strong>, <strong>Grid</strong>, and <strong>List</strong> components are all container components.</p> <ul> <li> <p>Simple example of configuring child components for the <strong>Column</strong> component:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
  <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
  <span class="nc">Divider</span><span class="p">()</span>
  <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">myText</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">Red</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>Example of nested child components in the <strong>Column</strong> component:.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
  <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">test1.jpg</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">click +1</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">+1 clicked!</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> </ul> <h2 id="componentization"> <a href="#componentization" class="anchor-heading" aria-labelledby="componentization"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Componentization </h2> <p>Components are the fundamental building blocks of a user interface. Everything you see on the screen is created by combining multiple components. Designing a user interface is essentially about assembling these components in a meaningful way. ArkTS provides a wide range of built-in components, such as <code class="language-plaintext highlighter-rouge">Text</code>, <code class="language-plaintext highlighter-rouge">Button</code>, and <code class="language-plaintext highlighter-rouge">Image</code>. Moreover, it allows developers to create custom components to better suit specific requirements.</p> <h3 id="basic-component"> <a href="#basic-component" class="anchor-heading" aria-labelledby="basic-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Component </h3> <h4 id="row-component"> <a href="#row-component" class="anchor-heading" aria-labelledby="row-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Row Component </h4> <p>The <strong>&lt;Row&gt;</strong> component lays out child components horizontally.</p> <blockquote> <p><strong>NOTE</strong></p> <p>This component is supported since API version 7. Updates will be marked with a superscript to indicate their earliest API version.</p> </blockquote> <h5 id="child-components"> <a href="#child-components" class="anchor-heading" aria-labelledby="child-components"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Child Components </h5> <p>Supported</p> <h5 id="apis"> <a href="#apis" class="anchor-heading" aria-labelledby="apis"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> APIs </h5> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Row</span><span class="p">(</span><span class="nx">value</span><span class="p">?:{</span><span class="nx">space</span><span class="p">?:</span>  <span class="kr">number</span> <span class="o">|</span> <span class="kr">string</span> <span class="p">})</span>
</code></pre></div></div> <p>This API can be used in ArkTS widgets since API version 9.</p> <p><strong>Parameters</strong></p> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Mandatory</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>space</td> <td>number | string</td> <td>No</td> <td>Horizontal spacing between two adjacent child components.<br />Since API version 9, this parameter does not take effect when it is set to a negative number or when <strong>justifyContent</strong> is set to <strong>FlexAlign.SpaceBetween</strong>, <strong>FlexAlign.SpaceAround</strong> or <strong>FlexAlign.SpaceEvenly</strong>.<br />Default value: <strong>0</strong>, in vp<br /><strong>NOTE</strong><br />The value can be a number greater than or equal to 0 or a string that can be converted to a number.</td> </tr> </tbody> </table></div> <h5 id="attributes"> <a href="#attributes" class="anchor-heading" aria-labelledby="attributes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attributes </h5> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>alignItems</td> <td>VerticalAlign</td> <td>Alignment mode of child components in the vertical direction.<br />Default value: <strong>VerticalAlign.Center</strong><br />This API can be used in ArkTS widgets since API version 9.</td> </tr> <tr> <td>justifyContent</td> <td>FlexAlign</td> <td>Alignment mode of the child components in the horizontal direction.<br />Default value: <strong>FlexAlign.Start</strong><br />This API can be used in ArkTS widgets since API version 9.</td> </tr> </tbody> </table></div> <blockquote> <p><strong>NOTE</strong></p> <p>During row layout, child components do not shrink if flexShrink is not set for them. In this case, the total size of the child components on the main axis can exceed the size of the container on the main axis.</p> </blockquote> <h5 id="example"> <a href="#example" class="anchor-heading" aria-labelledby="example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h5> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// xxx.ets</span>
<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">RowExample</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">({</span> <span class="na">space</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span> <span class="p">{</span>
      <span class="c1">// Set the horizontal spacing between two adjacent child components to 5.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">space</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Row</span><span class="p">({</span> <span class="na">space</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span> <span class="p">{</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">107</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>

      <span class="c1">// Set the alignment mode of the child components in the vertical direction.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">alignItems(Bottom)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">VerticalAlign</span><span class="p">.</span><span class="nx">Bottom</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">15%</span><span class="dl">'</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>

      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">alignItems(Center)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">VerticalAlign</span><span class="p">.</span><span class="nx">Center</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">15%</span><span class="dl">'</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>

      <span class="c1">// Set the alignment mode of the child components in the horizontal direction.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">justifyContent(End)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}).</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">End</span><span class="p">)</span>

      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">justifyContent(Center)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Row</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">30%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}).</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">Center</span><span class="p">)</span>
    <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p><img src="./images/image-basic/image4.png" /></p> <h4 id="column-component"> <a href="#column-component" class="anchor-heading" aria-labelledby="column-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Column Component </h4> <p>The <strong>&lt;Column&gt;</strong> component lays out child components vertically.</p> <blockquote> <p><strong>NOTE</strong></p> <p>This component is supported since API version 7. Updates will be marked with a superscript to indicate their earliest API version.</p> </blockquote> <h5 id="child-components-1"> <a href="#child-components-1" class="anchor-heading" aria-labelledby="child-components-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Child Components </h5> <p>Supported</p> <h5 id="apis-1"> <a href="#apis-1" class="anchor-heading" aria-labelledby="apis-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> APIs </h5> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Column</span><span class="p">(</span><span class="nx">value</span><span class="p">?:</span> <span class="p">{</span><span class="nx">space</span><span class="p">?:</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span><span class="p">})</span>
</code></pre></div></div> <p>This API can be used in ArkTS widgets since API version 9.</p> <p><strong>Parameters</strong></p> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Mandatory</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>space</td> <td>string | number</td> <td>No</td> <td>Vertical spacing between two adjacent child components.<br />Since API version 9, this parameter does not take effect when it is set to a negative number or when <strong>justifyContent</strong> is set to <strong>FlexAlign.SpaceBetween</strong>, <strong>FlexAlign.SpaceAround</strong> or <strong>FlexAlign.SpaceEvenly</strong>.<br />Default value: <strong>0</strong><br />Unit: vp<br /><strong>NOTE</strong><br />The value can be a number greater than or equal to 0 or a string that can be converted to a number.</td> </tr> </tbody> </table></div> <h5 id="attributes-1"> <a href="#attributes-1" class="anchor-heading" aria-labelledby="attributes-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attributes </h5> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>alignItems</td> <td>HorizontalAlign</td> <td>Alignment mode of the child components in the horizontal direction.<br />Default value: <strong>HorizontalAlign.Center</strong><br />This API can be used in ArkTS widgets since API version 9.</td> </tr> <tr> <td>justifyContent</td> <td>FlexAlign</td> <td>Alignment mode of the child components in the vertical direction.<br />Default value: <strong>FlexAlign.Start</strong><br />This API can be used in ArkTS widgets since API version 9.</td> </tr> </tbody> </table></div> <blockquote> <p><strong>NOTE</strong></p> <p>During column layout, child components do not shrink if flexShrink is not set for them. In this case, the total size of the child components on the main axis can exceed the size of the container on the main axis.</p> </blockquote> <h5 id="example-1"> <a href="#example-1" class="anchor-heading" aria-labelledby="example-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example </h5> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// xxx.ets</span>
<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ColumnExample</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">({</span> <span class="na">space</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span> <span class="p">{</span>
      <span class="c1">// Set the vertical spacing between two adjacent child components to 5.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">space</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Column</span><span class="p">({</span> <span class="na">space</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span> <span class="p">{</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>

      <span class="c1">// Set the alignment mode of the child components in the horizontal direction.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">alignItems(Start)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">HorizontalAlign</span><span class="p">.</span><span class="nx">Start</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>

      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">alignItems(End)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">HorizontalAlign</span><span class="p">.</span><span class="nx">End</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>

      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">alignItems(Center)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">HorizontalAlign</span><span class="p">.</span><span class="nx">Center</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">})</span>

      <span class="c1">// Set the alignment mode of the child components in the vertical direction.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">justifyContent(Center)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">height</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}).</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">Center</span><span class="p">)</span>

      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">justifyContent(End)</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xAFEEEE</span><span class="p">)</span>
        <span class="nc">Column</span><span class="p">().</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">90%</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0x00FFFF</span><span class="p">)</span>
      <span class="p">}.</span><span class="nf">height</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nf">border</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}).</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">End</span><span class="p">)</span>
    <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">).</span><span class="nf">padding</span><span class="p">({</span> <span class="na">top</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p><img src="./images/image-basic/image5.png" /></p> <p>You can learn more about basic components <a href="/application-development/basic-components/component-overview.md">here</a>.</p> <h3 id="custom-component"> <a href="#custom-component" class="anchor-heading" aria-labelledby="custom-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Custom Component </h3> <p>In ArkUI, components are the visual elements of the interface, divided into built-in components provided by the framework and custom components created by developers. Relying solely on built-in components can lead to rigid, hard-to-maintain designs. Custom components help improve code reusability, separate UI from business logic, and support version upgrades. They offer key features such as:</p> <ul> <li> <p><strong>Combinable</strong>: Combine built-in and custom components with shared properties and methods.</p> </li> <li> <p><strong>Reusable</strong>: Easily reused across different parts of the app.</p> </li> <li> <p><strong>Data-driven updates</strong>: Maintain internal state and update the UI when state changes.</p> </li> </ul> <h4 id="create-a-custom-component"> <a href="#create-a-custom-component" class="anchor-heading" aria-labelledby="create-a-custom-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a Custom Component </h4> <h5 id="basic-usage-of-custom-component"> <a href="#basic-usage-of-custom-component" class="anchor-heading" aria-labelledby="basic-usage-of-custom-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Usage of Custom Component </h5> <p>The following example shows the basic usage of a custom component.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">// xxx.ets</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">HelloComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello, World!</span><span class="dl">'</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// The HelloComponent custom component combines the &lt;Row&gt; and &lt;Text&gt; built-in components.</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="c1">// The change of the state variable message drives the UI to be re-rendered. As a result, the text changes from "Hello, World!" to "Hello, ArkUI!".</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello, ArkUI!</span><span class="dl">'</span><span class="p">;</span>
        <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>On <code class="language-plaintext highlighter-rouge">Previewer</code>, click <code class="language-plaintext highlighter-rouge">Hello, World!</code>, the text will change into <code class="language-plaintext highlighter-rouge">Hello, ArkUI!</code>.</p> <div style="text-align:center"> &lt;img src='./images/image-basic/image6.png' width=40%&gt; &lt;img src='./images/image-basic/image7.png' width=40%&gt; </div> <blockquote> <p><strong>NOTE</strong></p> <p>To reference the custom component in another file, use the keyword <strong>export</strong> to export the component and then use <strong>import</strong> to import it to the target file.</p> </blockquote> <p>Multiple <strong>HelloComponent</strong> instances can be created in <strong>build()</strong> of other custom components. In this way, <strong>HelloComponent</strong> is reused by those custom components.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ParentComponent</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">ArkUI message</span><span class="dl">'</span><span class="p">)</span>
      <span class="nc">HelloComponent</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello World!</span><span class="dl">'</span> <span class="p">});</span>
      <span class="nc">Divider</span><span class="p">()</span>
      <span class="nc">HelloComponent</span><span class="p">({</span><span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello, World!</span><span class="dl">'</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div style="text-align:center"> &lt;img src='./images/image-basic/image8.png' width=60%&gt; </div> <h5 id="basic-structure-of-a-custom-component"> <a href="#basic-structure-of-a-custom-component" class="anchor-heading" aria-labelledby="basic-structure-of-a-custom-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Structure of a Custom Component </h5> <p>Basic structure are listed below:</p> <ul> <li> <p><strong>struct</strong> The definition of a custom component must start with the @Component struct followed by the component name, and then component body enclosed by curly brackets. No inheritance is allowed. You can omit the <strong>new</strong> operator when instantiating a struct.</p> <blockquote> <p><strong>NOTE</strong></p> <p>The name or its class or function name of a custom component must be different from that of any built-in components.</p> </blockquote> </li> <li> <p><strong>@Component</strong> The @Component decorator can decorate only the structs declared by the <strong>struct</strong> keyword. When being decorated by @Component, a struct has the componentization capability. You must implement the <strong>build</strong> function for it to describe the UI. Each struct can be decorated by only one @Component. @Component can accept an optional parameter of the Boolean type.</p> <blockquote> <p><strong>NOTE</strong></p> <p>This decorator can be used in ArkTS widgets since API version 9.</p> <p>An optional parameter of the Boolean type can be used in the @Component since API version 11.</p> </blockquote> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p><strong>The build Function</strong> The <strong>build</strong> function is used to define the declarative UI description of a custom component. Every custom component must define a <strong>build</strong> function.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p><strong>@Entry</strong> A custom component decorated with @Entry is used as the default entry component of the page. Only one component can be decorated with @Entry in a single page. The @Entry decorator accepts an optional parameter of type <strong>LocalStorage</strong>.</p> <blockquote> <p><strong>NOTE</strong></p> <p>This decorator can be used in ArkTS widgets since API version 9.</p> <p>Since API version 10, the @Entry decorator accepts an optional parameter of type <strong>LocalStorage</strong> or type <strong>EntryOptions</strong>.</p> <p>This decorator can be used in atomic services since API version 11.</p> </blockquote> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p><strong>@Reusable</strong> Custom components decorated by @Reusable can be reused.</p> <blockquote> <p><strong>NOTE</strong></p> <p>This decorator can be used in ArkTS widgets since API version 10.</p> </blockquote> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Reusable</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div> </div> </li> </ul> <h5 id="rules-for-custom-component-parameters"> <a href="#rules-for-custom-component-parameters" class="anchor-heading" aria-labelledby="rules-for-custom-component-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rules for Custom Component Parameters </h5> <p>As can be learnt from preceding examples, a custom component can be created from a build method. During the creation, the custom component’s parameters are initialized based on the decorator rules.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">countDownFrom</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">color</span><span class="p">:</span> <span class="nx">Color</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Blue</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ParentComponent</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">someColor</span><span class="p">:</span> <span class="nx">Color</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Pink</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// Create an instance of MyComponent and initialize its countDownFrom variable with the value 10 and its color variable with the value this.someColor.</span>
      <span class="nc">MyComponent</span><span class="p">({</span> <span class="na">countDownFrom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">someColor</span> <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>In the following example, a function in the parent component is passed to the child component and called there.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Parent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">cnt</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="nx">submit</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cnt</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">cnt</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
      <span class="nc">Son</span><span class="p">({</span> <span class="na">submitArrow</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">submit</span> <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Son</span> <span class="p">{</span>
  <span class="nl">submitArrow</span><span class="p">?:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">add</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">submitArrow</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nf">submitArrow</span><span class="p">()</span>
          <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">56</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Click the button defined in <code class="language-plaintext highlighter-rouge">Son</code>, <code class="language-plaintext highlighter-rouge">Text</code> result will be updated in <code class="language-plaintext highlighter-rouge">Parent</code>.</p> <div style="text-align:center"> &lt;img src='./images/image-basic/image9.png' width=40%&gt; &lt;img src='./images/image-basic/image10.png' width=40%&gt; </div> <h5 id="rules-in-build-function"> <a href="#rules-in-build-function" class="anchor-heading" aria-labelledby="rules-in-build-function"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rules in build Function </h5> <p>Whatever declared in build() are called UI descriptions. UI descriptions must comply with the following rules:</p> <ul> <li>For an @Entry decorated custom component, exactly one root component is required under <strong>build()</strong>. This root component must be a container component. <strong>ForEach</strong> is not allowed at the top level. For an @Component decorated custom component, exactly one root component is required under <strong>build()</strong>. This root component is not necessarily a container component. <strong>ForEach</strong> is not allowed at the top level. <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Exactly one root component is required, and it must be a container component.</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">ChildComponent</span><span class="p">()</span> 
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
  
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ChildComponent</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Exactly one root component is required, and it is not necessarily a container component.</span>
    <span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">test.jpg</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>Local variable declaration is not allowed. The following example should be avoided:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Avoid: declaring a local variable.</span>
  <span class="kd">let</span> <span class="nx">num</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p><code class="language-plaintext highlighter-rouge">console.info</code> can be used in the UI description only when it is in a method or function. The following example should be avoided:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Avoid: using console.info directly in UI description.</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">print debug log</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>Creation of a local scope is not allowed. The following example should be avoided:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Avoid: creating a local scope.</span>
  <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>Only methods decorated by @Builder can be called. The parameters of built-in components can be the return values of TS methods.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ParentComponent</span> <span class="p">{</span>
  <span class="nf">doSomeCalculations</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="nf">calcTextValue</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">Hello World</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">Builder</span> <span class="nf">doSomeRender</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="s2">`Hello World`</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// Avoid: calling a method not decorated by @Builder.</span>
      <span class="k">this</span><span class="p">.</span><span class="nf">doSomeCalculations</span><span class="p">();</span>
      <span class="c1">// Prefer: Call an @Builder decorated method.</span>
      <span class="k">this</span><span class="p">.</span><span class="nf">doSomeRender</span><span class="p">();</span>
      <span class="c1">// Prefer: Pass the return value of a TS method as the parameter.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nf">calcTextValue</span><span class="p">())</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>The <strong>switch</strong> syntax is not allowed. If conditional judgment is required, use the <strong>if</strong> statement. Refer to the code snippet below.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Avoid: using the switch syntax.</span>
    <span class="k">switch </span><span class="p">(</span><span class="nx">expression</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
        <span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="nl">default</span><span class="p">:</span>
        <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// Correct usage: Use if.</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">expression</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">expression</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>Expressions are not allowed except for the <strong>if</strong> component. Refer to the code snippet below.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Avoid: expressions.</span>
    <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">aVar</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">?</span> <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span> <span class="p">:</span> <span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>

    <span class="c1">// Positive example: Use if for judgment.</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">aVar</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nc">Image</span><span class="p">(</span><span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>Directly changing a state variable is not allowed. The following example should be avoided:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">textColor</span><span class="p">:</span> <span class="nx">Color</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Yellow</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">columnColor</span><span class="p">:</span> <span class="nx">Color</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Green</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">count</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// Avoid: directly changing the value of count in the &lt;Text&gt; component.</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textColor</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">columnColor</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Red</span><span class="p">;</span>
        <span class="p">})</span>
      <span class="nc">Button</span><span class="p">(</span><span class="dl">"</span><span class="s2">change textColor</span><span class="dl">"</span><span class="p">).</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span><span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">textColor</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Pink</span><span class="p">;</span>
      <span class="p">})</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">columnColor</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> </div> <p>In ArkUI state management, UI re-render is driven by state.</p> </li> </ul> <div style="text-align:center"> &lt;img src='./images/image-basic/image11.png' width=40%&gt; </div> <p>Therefore, do not change any state variable in the <strong>build()</strong> or @Builder decorated method of a custom component. Otherwise, loop rendering may result.</p> <h5 id="universal-style-of-a-custom-component"> <a href="#universal-style-of-a-custom-component" class="anchor-heading" aria-labelledby="universal-style-of-a-custom-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Universal Style of a Custom Component </h5> <p>The universal style of a custom component is configured by the chain call.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ChildComponent</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Button</span><span class="p">(</span><span class="s2">`Hello World`</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">ChildComponent</span><span class="p">()</span>
        <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">Red</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>&lt;img src=’./images/image-basic/image12.png’ width=40%&gt;</p> <blockquote> <p><strong>NOTE</strong></p> <p>When ArkUI sets styles for custom components, an invisible container component is set for <strong>ChildComponent</strong>. These styles are set on the container component instead of the <strong>Button</strong> component of <strong>ChildComponent</strong>. As seen from the rendering result, the red background color is not directly applied to the button. Instead, it is applied to the container component that is invisible to users where the button is located.</p> </blockquote> <h4 id="page-and-custom-component-lifecycle"> <a href="#page-and-custom-component-lifecycle" class="anchor-heading" aria-labelledby="page-and-custom-component-lifecycle"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Page and Custom Component Lifecycle </h4> <p>Before we dive into the page and custom component lifecycle, it would be helpful to learn the relationship between custom <strong>components</strong> and <strong>pages</strong>.</p> <ul> <li> <p>Custom component: @Component decorated UI unit, which can combine multiple built-in components for component reusability and invoke component lifecycle callbacks.</p> </li> <li> <p>Page: UI page of an application. A page can consist of one or more custom components. A custom component decorated with <code class="language-plaintext highlighter-rouge">@Entry</code> is used as the entry component of the page. Exactly one component is decorated with @Entry in a single source file. Only components decorated by @Entry can invoke the lifecycle callbacks of a page.</p> </li> </ul> <p>The following lifecycle callbacks are provided for a page, that is, a custom component decorated with @Entry:</p> <ul> <li> <p><strong>onPageShow</strong>: Invoked each time the page is displayed, for example, during page redirection or when the application is switched to the foreground.</p> </li> <li> <p><strong>onPageHide</strong>: Invoked each time the page is hidden, for example, during page redirection or when the application is switched to the background.</p> </li> <li> <p><strong>onBackPress</strong>: Invoked when the user clicks the <strong>Back</strong> button.</p> </li> </ul> <p>The following lifecycle callbacks are provided for a custom component decorated with @Component:</p> <ul> <li> <p><strong>aboutToAppear</strong>: Invoked when the custom component is about to appear. Specifically, it is invoked after a new instance of the custom component is created and before its <strong>build</strong> function is executed.</p> </li> <li> <p><strong>aboutToDisappear</strong>: Invoked when the custom component is about to be destroyed. Do not change state variables in the <strong>aboutToDisappear</strong> function as doing this can cause unexpected errors. For example, the modification of the <strong>@Link</strong> decorated variable may cause unstable application running.</p> </li> </ul> <p>The following figure shows the lifecycle of a component (page) decorated with @Entry.</p> <div style="text-align:center"> <img src="./images/image-basic/image13.png" /> </div> <p>The following example shows when the lifecycle callbacks are invoked:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Index.ets</span>
<span class="k">import</span> <span class="nx">router</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@ohos.router</span><span class="dl">'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">showChild</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">btnColor</span><span class="p">:</span><span class="kr">string</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">#FF007DFF</span><span class="dl">"</span>

  <span class="c1">// Only components decorated by @Entry can call the lifecycle callbacks of a page.</span>
  <span class="nf">onPageShow</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">Index onPageShow</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// Only components decorated by @Entry can call the lifecycle callbacks of a page.</span>
  <span class="nf">onPageHide</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">Index onPageHide</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Only components decorated by @Entry can call the lifecycle callbacks of a page.</span>
  <span class="nf">onBackPress</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">Index onBackPress</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">btnColor</span> <span class="o">=</span><span class="dl">"</span><span class="s2">#FFEE0606</span><span class="dl">"</span>
    <span class="k">return</span> <span class="kc">true</span> <span class="c1">// The value true means that the page executes its own return logic instead of the , and false (default) means that the default return logic is used.</span>
  <span class="p">}</span>

  <span class="c1">// Component lifecycle</span>
  <span class="nf">aboutToAppear</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyComponent aboutToAppear</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Component lifecycle</span>
  <span class="nf">aboutToDisappear</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyComponent aboutToDisappear</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// When this.showChild is true, create the Child child component and invoke Child aboutToAppear.</span>
      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">showChild</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Child</span><span class="p">()</span>
      <span class="p">}</span>
      <span class="c1">// When this.showChild is false, delete the Child child component and invoke Child aboutToDisappear.</span>
      <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">delete Child</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">margin</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">btnColor</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">showChild</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">})</span>
      <span class="c1">// Push to the page and execute onPageHide.</span>
      <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">push to next page</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">router</span><span class="p">.</span><span class="nf">pushUrl</span><span class="p">({</span> <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">pages/page</span><span class="dl">'</span> <span class="p">});</span>
        <span class="p">})</span>
    <span class="p">}</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Child</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello World</span><span class="dl">'</span><span class="p">;</span>
  <span class="c1">// Component lifecycle</span>
  <span class="nf">aboutToDisappear</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">[lifeCycle] Child aboutToDisappear</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nf">aboutToAppear</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">[lifeCycle] Child aboutToAppear</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">).</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">margin</span><span class="p">(</span><span class="mi">20</span><span class="p">).</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Hello ArkUI</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// page.ets</span>
<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">page</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">textColor</span><span class="p">:</span> <span class="nx">Color</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Black</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">num</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="nf">onPageShow</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">num</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="p">}</span>

  <span class="nf">onPageHide</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">page onPageHide</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nf">onBackPress</span><span class="p">()</span> <span class="p">{</span><span class="c1">// If the value is not set, false is used.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textColor</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Grey</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">num</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="p">}</span>

  <span class="nf">aboutToAppear</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textColor</span> <span class="o">=</span> <span class="nx">Color</span><span class="p">.</span><span class="nx">Blue</span>
  <span class="p">}</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text </span><span class="p">(</span><span class="s2">`num: </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">num</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">fontWeight</span><span class="p">(</span><span class="nx">FontWeight</span><span class="p">.</span><span class="nx">Bold</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">textColor</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">margin</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">num</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="p">})</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>In the preceding example, the <strong>Index</strong> page contains two custom components. One is <strong>MyComponent</strong> decorated with @Entry, which is also the entry component (root node) of the page. The other is <strong>Child</strong>, which is a child component of <strong>MyComponent</strong>. Only components decorated by @Entry can call the page lifecycle callbacks. Therefore, the lifecycle callbacks of the <strong>Index</strong> page – <strong>onPageShow</strong>, <strong>onPageHide</strong>, and <strong>onBackPress</strong>, are declared in <strong>MyComponent</strong>. In <strong>MyComponent</strong> and its child components, component lifecycle callbacks – <strong>aboutToAppear</strong> and <strong>aboutToDisappear</strong> – are also declared.</p> <ul> <li> <p>The initialization process of application cold start is as follows: MyComponent aboutToAppear -&gt; MyComponent build -&gt; Child aboutToAppear -&gt; Child build -&gt; Child build execution completed -&gt; MyComponent build execution completed -&gt; Index onPageShow</p> </li> <li> <p>When <strong>delete Child</strong> is clicked, the value of <strong>this.showChild</strong> linked to <strong>if</strong> changes to <strong>false</strong>. As a result, the <strong>Child</strong> component is deleted, and the <strong>Child aboutToDisappear</strong> callback is invoked.</p> </li> <li> <p>When <strong>push to next page</strong> is clicked, the <strong>router.pushUrl</strong> API is called to jump to the next page. As a result, the <strong>Index</strong> page is hidden, and the <strong>Index onPageHide</strong> callback is invoked. As the called API is <strong>router.pushUrl</strong>, which results in the Index page being hidden, but not destroyed, only the <strong>onPageHide</strong> callback is invoked. After a new page is displayed, the process of initializing the lifecycle of the new page is executed.</p> </li> <li> <p>If <strong>router.replaceUrl</strong> is called, the <strong>Index</strong> page is destroyed. In this case, the execution of lifecycle callbacks changes to: Index onPageHide -&gt; MyComponent aboutToDisappear -&gt; Child aboutToDisappear. As aforementioned, a component is destroyed by directly removing it from the component tree. Therefore, <strong>aboutToDisappear</strong> of the parent component is called first, followed by <strong>aboutToDisappear</strong> of the child component, and then the process of initializing the lifecycle of the new page is executed.</p> </li> <li> <p>When the <strong>Back</strong> button is clicked, the <strong>Index onBackPress</strong> callback is invoked, and the current <strong>Index</strong> page is destroyed.</p> </li> <li> <p>When the application is minimized or switched to the background, the <strong>Index onPageHide</strong> callback is invoked. As the current <strong>Index</strong> page is not destroyed, <strong>aboutToDisappear</strong> of the component is not executed. When the application returns to the foreground, the <strong>Index onPageShow</strong> callback is invoked.</p> </li> <li> <p>When the application exits, the following callbacks are executed in order: Index onPageHide -&gt; MyComponent aboutToDisappear -&gt; Child aboutToDisappear.</p> </li> </ul> <h4 id="more-usage"> <a href="#more-usage" class="anchor-heading" aria-labelledby="more-usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> More Usage </h4> <ul> <li><a href="/application-development/custom-component-layout.md">Custom Component Layout</a></li> <li><a href="/application-development/freezing-custom-component.md">Freezing a Custom Component</a></li> </ul> <h2 id="state-management"> <a href="#state-management" class="anchor-heading" aria-labelledby="state-management"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> State Management </h2> <p>In previous examples, most of the pages built are static pages, which are delivered to the end user without having to be processed. If you are building dynamic, interactive pages, you need to handle <strong>state management</strong>.</p> <p><strong>Figure 1:</strong> State managed UI</p> <div style="text-align:center"> <img src="./images/image-basic/v1.gif" /> </div> <p>In the preceding example, the interaction between the user and the application triggers an update in the text state, which in turn triggers re-rendering of the UI. As a result, the <strong>Hello World</strong> text changes to <strong>Hello ArkUI</strong>.</p> <p>In a declarative UI framework, the UI is the result of the application’s runtime state. You define a UI model with the state as a parameter, and when the state changes, the UI updates accordingly. This update process is known as the state management mechanism in ArkUI.</p> <p>For custom components, any variable that affects the UI must be decorated. Without a decorator, the UI renders only once at initialization and won’t update with changes. The diagram below illustrates the relationship between state and view.</p> <div style="text-align:center"> <img src="./images/image-basic/image14.png" /> </div> <ul> <li> <p><strong>View (UI)</strong>: UI rendering, which is visual representation of the UI description in the <strong>build</strong> method and @Builder decorated method.</p> </li> <li> <p><strong>State</strong>: data that drives the UI to re-render. State data is changed by invoking the event method of the component. The change of the state data triggers the re-rendering of the UI.</p> </li> </ul> <h3 id="basic-concepts"> <a href="#basic-concepts" class="anchor-heading" aria-labelledby="basic-concepts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Concepts </h3> <ul> <li><strong>State Variables</strong>: A variable decorated by a state decorator. Its value change will trigger UI re-renders. For example: <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">State</span> <span class="nx">num</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// 'num' is the state variable, '@State' is the decorator.</span>
</code></pre></div> </div> </li> <li><strong>Regular Variables</strong>: A variable that is not decorated by a state decorator and is usually used for auxiliary calculation. Its value change will not trigger UI re-renders. In the following example, the <strong>increaseBy</strong> variable is a regular variable: <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="nx">increaseBy</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// 'increaseBy' is a regular variable.</span>
</code></pre></div> </div> </li> <li><strong>Data Sources/Synchronization Sources</strong>: Original source of a state variable, which can be synchronized to different state data. Generally, it is the data passed from the parent component to the child component. For example: <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">count</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>  <span class="c1">// 'count' is the data source.</span>
</code></pre></div> </div> </li> <li><strong>Named Argument Mechanism</strong>: A mechanism where the parent component passes state variables to the child component by specifying parameters. It is the primary means of passing synchronization parameters from the parent component to the child component. Example: <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">CompA</span><span class="p">:</span> <span class="p">({</span> <span class="na">aProp</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">aProp</span> <span class="p">});</span>
</code></pre></div> </div> </li> <li><strong>Initialization from Parent Component</strong>: A process where the parent component uses the named parameter mechanism to pass specified parameters to the child component. The default value used in local initialization will be overwritten by the value passed from the parent component. Example:</li> </ul> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MyComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">count</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>       <span class="c1">// State variable</span>
  <span class="k">private</span> <span class="nx">increaseBy</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Regular variable</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Parent</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// Initialize from parent, overriding local default values</span>
      <span class="nc">MyComponent</span><span class="p">({</span> <span class="na">count</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">increaseBy</span><span class="p">:</span> <span class="mi">2</span> <span class="p">})</span>  
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <ul> <li> <p><strong>Child Component Initialization</strong>: A capability to pass state variables to the child component to initialize the corresponding state variables therein. The example is the same as above.</p> </li> <li> <p><strong>Local Initialization</strong>: A process where a value is assigned to a variable as its default value in the variable declaration. Example: <code class="language-plaintext highlighter-rouge">@State count: number = 0;</code></p> </li> </ul> <h3 id="decorator-overview"> <a href="#decorator-overview" class="anchor-heading" aria-labelledby="decorator-overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Decorator Overview </h3> <p>ArkUI provides a diverse array of decorators. You can use these decorators to observe state variables changes within a component or globally and pass the changes between different component levels (for example, between parent and child components or grandparent and grandchild components). According to the scope of the state variable, decorators can be roughly classified into the following types:</p> <ul> <li> <p>Decorators for managing the state of a <code class="language-plaintext highlighter-rouge">component</code>: implement state management at the component level by allowing for observation of state changes within a component and changes at different component levels. The observation is limited to state changes in the same component tree, that is, on the same page.</p> </li> <li> <p>Decorators for managing the state of an <code class="language-plaintext highlighter-rouge">application</code>: implement global state management of an application by allowing for observation of state changes on different pages or even different UIAbility components.</p> </li> </ul> <p>According to the data transfer mode and synchronization type, decorators can also be classified into the following types:</p> <ul> <li> <p>Decorators that allow for one-way (read-only) transfer</p> </li> <li> <p>Decorators that allow for two-way (mutable) transfer</p> </li> </ul> <p>The following figure illustrates the decorators. You can use these decorators at your disposal to implement linkage between data and the UI.</p> <div style="text-align:center"> <img src="./images/image-basic/image15.png" /> </div> <p>In the preceding figure, the decorators in the components area are used for state management at the <code class="language-plaintext highlighter-rouge">component level</code>, while others are used for state management at the <code class="language-plaintext highlighter-rouge">application level</code>. You can use <strong>@StorageLink/@LocalStorageLink</strong> to implement two-way synchronization of the application and component state, and <strong>@StorageProp/@LocalStorageProp</strong> to implement one-way synchronization.</p> <blockquote> <p><strong>NOTE</strong></p> <p>To start, use @State, @Prop and @Link decorator is enough for simple development.</p> </blockquote> <h4 id="decorators-for-component-state-management"> <a href="#decorators-for-component-state-management" class="anchor-heading" aria-labelledby="decorators-for-component-state-management"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Decorators for component state management </h4> <ul> <li> <p><strong><a href="/application-development/state-management-decorators/state-decorator">@State</a></strong>: An @State decorated variable holds the state of the owning component. It can be the source of one- or two-way synchronization with child components. When the variable changes, the dependent component will be updated.</p> </li> <li> <p><strong><a href="/application-development/state-management-decorators/prop-decorator">@Prop</a></strong>: An @Prop decorated variable can create one-way synchronization with a variable of its parent component. @Prop decorated variables are mutable, but changes are not synchronized to the parent component.</p> </li> <li> <p><strong><a href="/application-development/state-management-decorators/link-decorator">@Link</a></strong>: An @Link decorated variable creates two-way synchronization with a variable of its parent component. When the @Link decorated variable has its value changed, its source is updated as well; when the source updates, the @Link decorated variable will do as well.</p> </li> <li> <p><strong><a href="/application-development/state-management-decorators/provide-consume-decorator">@Provide/@Consume</a></strong>: Variables decorated by @Provide/@Consume are used for data synchronization across component levels. The components can be bound to the variables through aliases or attribute names. Data does not need to be passed through the named parameter mechanism.</p> </li> <li> <p><strong><a href="/application-development/state-management-decorators/observed-objectlink-decorator">@Observed</a></strong>: @Observed is a class decorator. You can use it to decorate the class that has multiple levels of nested objects or arrays to be observed. Note that @Observed must be used with @ObjectLink for two-way synchronization or with @Prop for one-way synchronization.</p> </li> <li> <p><strong><a href="/application-development/state-management-decorators/observed-objectlink-decorator">@ObjectLink</a></strong>: An @ObjectLink decorated variable is used with an @Observed decorated class of the parent component for two-way data synchronization. It is applicable in scenarios involving multiple levels of nested objects or arrays in the class.</p> </li> </ul> <blockquote> <p><strong>NOTE</strong></p> <p>Only <strong>@Observed/@ObjectLink</strong> can be used to observe changes of nested attributes. Other decorators can be used to observe changes of attributes at the first layer only.</p> </blockquote> <h4 id="decorators-for-application-state-management"> <a href="#decorators-for-application-state-management" class="anchor-heading" aria-labelledby="decorators-for-application-state-management"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Decorators for application state management </h4> <ul> <li> <p><strong>AppStorage</strong>: a special <strong>LocalStorage</strong> singleton instance. It is an application-wide database bound to the application process and can be linked to components through the <strong>@StorageProp</strong> and <strong>@StorageLink</strong> decorators.</p> </li> <li> <p><strong><a href="/application-development/state-management-decorators/appstorage">AppStorage</a></strong> is the hub for application state. Data that needs to interact with components (UI) is stored in AppStorage, including <strong><a href="/application-development/state-management-decorators/persistentstorage">PersistentStorage</a></strong> and <strong>Environment</strong> data. The UI accesses the data through the decorators or APIs provided by AppStorage.</p> </li> <li> <p><strong><a href="/application-development/state-management-decorators/localstorage">LocalStorage</a></strong>: an in-memory “database” for the application state declared by the application and typically used to share state across pages. It can be linked to the UI through the <strong>@LocalStorageProp</strong> and <strong>@LocalStorageLink</strong> decorators.</p> </li> </ul> <h3 id="other-state-management-features"> <a href="#other-state-management-features" class="anchor-heading" aria-labelledby="other-state-management-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Other State Management Features </h3> <p><strong><a href="/application-development/state-management-decorators/watch-decorator">@Watch</a></strong>: listens for the changes of state variables.</p> <p><strong><a href="/application-development/state-management-decorators/operator">$$operator</a></strong>: provides a TS variable by-reference to a built-in component so that the variable value and the internal state of that component are kept in sync.</p> <h2 id="event-binding"> <a href="#event-binding" class="anchor-heading" aria-labelledby="event-binding"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Event Binding </h2> <h3 id="universal-events"> <a href="#universal-events" class="anchor-heading" aria-labelledby="universal-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Universal Events </h3> <p>This tutorial will introduce <strong>Touchscreen Event</strong> only, you can redirect the link to learn more like <strong><a href="https://github.com/eclipse-oniro-mirrors/docs/blob/OpenHarmony-4.1-Release/en/application-dev/ui/arkts-common-events-focus-event.md">Focus Event</a></strong> and <strong><a href="https://github.com/eclipse-oniro-mirrors/docs/blob/OpenHarmony-4.1-Release/en/application-dev/ui/arkts-common-events-device-input-event.md">Keyboard and Mouse Event</a></strong>.</p> <p><strong>Touchscreen events</strong> are events triggered when a finger or stylus is placed on, moved along, or lifted from a component. Events like <a href="#click-event">click event</a>, <a href="#touch-event">touch event</a> are most often used.</p> <h4 id="click-event"> <a href="#click-event" class="anchor-heading" aria-labelledby="click-event"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Click Event </h4> <p>A click event is triggered when a complete press and lift action is performed by using a finger or a stylus. When a click event occurs, the following callback is triggered:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">onClick</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="p">(</span><span class="nx">event</span><span class="p">?:</span> <span class="nx">ClickEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">)</span>
</code></pre></div></div> <p>The <strong>event</strong> parameter provides the coordinates of the click relative to the window or component as well as the event source where the click occurs, for example, a button, a click on which shows or hides an image.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">IfElseTransition</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">flag</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">btnMsg</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">show</span><span class="dl">'</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Button</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">btnMsg</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="mi">80</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">30</span><span class="p">).</span><span class="nf">margin</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">flag</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">btnMsg</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">hide</span><span class="dl">'</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">btnMsg</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">show</span><span class="dl">'</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="c1">// Click the button to show or hide the image.</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">flag</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">flag</span><span class="p">;</span>
        <span class="p">})</span>
      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">flag</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Image</span><span class="p">(</span><span class="nf">$r</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.media.icon</span><span class="dl">'</span><span class="p">)).</span><span class="nf">width</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p><strong>Figure 1</strong> Showing or hiding an image through the click event of a button</p> <div style="text-align:center"> <img src="./images/image-basic/v12.gif" /> </div> <h4 id="touch-event"> <a href="#touch-event" class="anchor-heading" aria-labelledby="touch-event"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Touch Event </h4> <p>A touch event is triggered when a finger or stylus is placed on, moved along, or lifted from a component.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">onTouch</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="p">(</span><span class="nx">event</span><span class="p">?:</span> <span class="nx">TouchEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">)</span>
</code></pre></div></div> <ul> <li> <p>If <strong>event.type</strong> is <strong>TouchType.Down</strong>, the finger or stylus is placed on the component.</p> </li> <li> <p>If <strong>event.type</strong> is <strong>TouchType.Up</strong>, the finger or stylus is lifted from the component.</p> </li> <li> <p>If <strong>event.type</strong> is <strong>TouchType.Move</strong>, the finger or stylus is moved along the component.</p> </li> </ul> <p>The touch event supports single and multi-touch interactions. Information about the touch event can be obtained using the <strong>event</strong> parameter, such as the location of the finger that triggers the event, unique identifier of the finger, finger information changed, and the input device source.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// xxx.ets</span>
<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">TouchExample</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">text</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">eventType</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">Touch</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">40</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onTouch</span><span class="p">((</span><span class="nx">event</span><span class="p">?:</span> <span class="nx">TouchEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">TouchType</span><span class="p">.</span><span class="nx">Down</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Down</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">TouchType</span><span class="p">.</span><span class="nx">Up</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Up</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">TouchType</span><span class="p">.</span><span class="nx">Move</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Move</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">TouchType:</span><span class="dl">'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="s1">Distance between touch point and touch element:</span><span class="se">\n</span><span class="s1">x: </span><span class="dl">'</span>
            <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">y: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="s1">Component globalPos:(</span><span class="dl">'</span>
            <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">globalPosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">,</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">globalPosition</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">)</span><span class="se">\n</span><span class="s1">width:</span><span class="dl">'</span>
            <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="s1">height:</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">height</span>
          <span class="p">}</span>
        <span class="p">})</span>
      <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">Touch</span><span class="dl">'</span><span class="p">).</span><span class="nf">height</span><span class="p">(</span><span class="mi">50</span><span class="p">).</span><span class="nf">width</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nf">margin</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onTouch</span><span class="p">((</span><span class="nx">event</span><span class="p">?:</span> <span class="nx">TouchEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">TouchType</span><span class="p">.</span><span class="nx">Down</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Down</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">TouchType</span><span class="p">.</span><span class="nx">Up</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Up</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="nx">TouchType</span><span class="p">.</span><span class="nx">Move</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Move</span><span class="dl">'</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">TouchType:</span><span class="dl">'</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="s1">Distance between touch point and touch element:</span><span class="se">\n</span><span class="s1">x: </span><span class="dl">'</span>
            <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">y: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">y</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="s1">Component globalPos:(</span><span class="dl">'</span>
            <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">globalPosition</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">,</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">globalPosition</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">)</span><span class="se">\n</span><span class="s1">width:</span><span class="dl">'</span>
            <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">width</span> <span class="o">+</span> <span class="dl">'</span><span class="se">\n</span><span class="s1">height:</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">height</span>
          <span class="p">}</span>
        <span class="p">})</span>
      <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span>
    <span class="p">}.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">).</span><span class="nf">padding</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div style="text-align:center"> <img src="./images/image-basic/v13.gif" /> </div> <h3 id="gesture-events"> <a href="#gesture-events" class="anchor-heading" aria-labelledby="gesture-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Gesture Events </h3> <p>You can bind to each component different gesture events and design the logic for responding to these events. When a gesture is successfully recognized, the ArkUI framework notifies the component of the gesture recognition result through event callback.</p> <h4 id="gesture-common-gesture-binding-method"> <a href="#gesture-common-gesture-binding-method" class="anchor-heading" aria-labelledby="gesture-common-gesture-binding-method"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> gesture (Common Gesture Binding Method) </h4> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">.</span><span class="nf">gesture</span><span class="p">(</span><span class="nx">gesture</span><span class="p">:</span> <span class="nx">GestureType</span><span class="p">,</span> <span class="nx">mask</span><span class="p">?:</span> <span class="nx">GestureMask</span><span class="p">)</span>
</code></pre></div></div> <p><strong>gesture</strong> is a frequently used API for binding a gesture to a component.</p> <p>We don’t expand it in this tutorial but you can check some examples <a href="https://github.com/eclipse-oniro-mirrors/docs/blob/OpenHarmony-4.1-Release/en/application-dev/ui/arkts-gesture-events-binding.md">here</a> if interested.</p> <h2 id="rendering-control"> <a href="#rendering-control" class="anchor-heading" aria-labelledby="rendering-control"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rendering Control </h2> <h3 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>ArkUI uses the <code class="language-plaintext highlighter-rouge">build()</code> function of custom components and declarative UI description statements in the <code class="language-plaintext highlighter-rouge">@builder</code> decorator to build the corresponding UI. In declarative description statements, you can use rendering control statements in addition to system components to accelerate UI construction.</p> <p>These rendering control statements includes:</p> <ul> <li><strong>Conditional statements</strong> that control whether components are displayed</li> <li><strong>Loop statements</strong> for repeated content that quickly generate components based on array data</li> <li><strong>Lazy loading statements</strong> for scenarios involving a large amount of data.</li> </ul> <h3 id="ifelse-conditional-rendering"> <a href="#ifelse-conditional-rendering" class="anchor-heading" aria-labelledby="ifelse-conditional-rendering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> if/else: Conditional Rendering </h3> <p>ArkTS provides conditional rendering. It supports the use of the <strong>if</strong>, <strong>else</strong>, and <strong>else if</strong> statements to display different content based on the application state.</p> <blockquote> <p><strong>NOTE</strong></p> <p>This API can be used in ArkTS widgets since API version 9.</p> </blockquote> <h4 id="rules-of-use"> <a href="#rules-of-use" class="anchor-heading" aria-labelledby="rules-of-use"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rules of Use </h4> <ul> <li> <p>The <strong>if</strong>, <strong>else</strong>, and <strong>else if</strong> statements are supported.</p> </li> <li> <p>The conditional statements following <strong>if</strong> and <strong>else if</strong> can use state variables.</p> </li> <li> <p>Conditional statements can be used within a container component to build different child components.</p> </li> <li> <p>Conditional statements are “transparent” when it comes to the parent-child relationship of components. Rules about permissible child components must be followed when there is one or more <strong>if</strong> statements between the parent and child components.</p> </li> <li> <p>The build function inside each conditional branch must follow the special rules for build functions. Each of such build functions must create one or more components. An empty build function that creates no components will result in a syntax error.</p> </li> <li> <p>Some container components impose restrictions on the type or number of child components. When conditional statements are used in such components, these restrictions also apply to the components to be created by using the conditional statements. For example, when a conditional statement is used in the <strong>&lt;Grid&gt;</strong> container component, whose child components can only be <strong>&lt;GridItem&gt;</strong>, only the <strong>&lt;GridItem&gt;</strong> component can be used in the conditional statement.</p> </li> </ul> <h4 id="update-mechanism"> <a href="#update-mechanism" class="anchor-heading" aria-labelledby="update-mechanism"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Update Mechanism </h4> <p>A conditional statement updates whenever a state variable used inside the <strong>if</strong> or <strong>else if</strong> condition changes. Specifically:</p> <ol> <li> <p>The conditional statement re-evaluates the conditions. If the evaluation of the conditions changes, steps 2 and 3 are performed. Otherwise, no follow-up operation is required.</p> </li> <li> <p>The ArkUI framework removes all child components that have been built.</p> </li> <li> <p>The ArkUI framework executes the build function of the conditional branch again to add the generated child component to its parent component. If an applicable <strong>else</strong> branch is missing, no new build function will be executed.</p> </li> </ol> <p>A condition can include Typescript expressions. As for any expression inside build functions, such an expression must not change any application state.</p> <h4 id="use-scenarios"> <a href="#use-scenarios" class="anchor-heading" aria-labelledby="use-scenarios"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Scenarios </h4> <h5 id="using-if-for-conditional-rendering"> <a href="#using-if-for-conditional-rendering" class="anchor-heading" aria-labelledby="using-if-for-conditional-rendering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using if for Conditional Rendering </h5> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ViewA</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">count</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`count=</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>

      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="s2">`count is positive`</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">Green</span><span class="p">)</span>
      <span class="p">}</span>

      <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">increase count</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span><span class="p">;</span>
        <span class="p">})</span>

      <span class="nc">Button</span><span class="p">(</span><span class="dl">'</span><span class="s1">decrease count</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="o">--</span><span class="p">;</span>
        <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Each branch of the <strong>if</strong> statement includes a build function. Each of such build functions must create one or more components. On initial render, <strong>if</strong> will execute a build function and add the generated child component to its parent component.</p> <p><strong>if</strong> updates whenever a state variable used inside the <strong>if</strong> or <strong>else if</strong> condition changes, and re-evaluates the conditions. If the evaluation of the conditions changes, it means that another branch of <strong>if</strong> needs to be built. In this case, the ArkUI framework will:</p> <ol> <li> <p>Remove all previously rendered components (of the earlier branch).</p> </li> <li> <p>Execute the build function of the branch and add the generated child component to its parent component.</p> </li> </ol> <p>In the preceding example, if <strong>count</strong> increases from 0 to 1, then <strong>if</strong> updates, the condition <strong>count &gt; 0</strong> is re-evaluated, and the evaluation result changes from <strong>false</strong> to <strong>true</strong>. Therefore, the positive branch build function will be executed, which creates a <strong>&lt;Text&gt;</strong> component and adds it to the <strong>&lt;Column&gt;</strong> parent component. If <strong>count</strong> changes back to 0 later, then the <strong>&lt;Text&gt;</strong> component will be removed from the <strong>&lt;Column&gt;</strong> component. Since there is no <strong>else</strong> branch, no new build function will be executed.</p> <p>Here is a preview of the example:</p> <div style="text-align:center"> <img src="./images/image-basic/image27.png" width="50%" /> </div> <p>Click <code class="language-plaintext highlighter-rouge">increase count</code>, ‘count is positive’ will appear on the Previewer.</p> <div style="text-align:center"> <img src="./images/image-basic/image28.png" width="50%" /> </div> <h5 id="if--else--and-child-component-states"> <a href="#if--else--and-child-component-states" class="anchor-heading" aria-labelledby="if--else--and-child-component-states"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> if … else … and Child Component States </h5> <p>This example involves <strong>if…</strong> <strong>else…</strong> and a child component with an @State decorated variable.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">CounterView</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nl">label</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">unknown</span><span class="dl">'</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
      <span class="nc">Button</span><span class="p">(</span><span class="s2">`counter </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">counter</span><span class="p">}</span><span class="s2"> +1`</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MainView</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">toggle</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">CounterView</span><span class="p">({</span> <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CounterView #positive</span><span class="dl">'</span> <span class="p">})</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nc">CounterView</span><span class="p">({</span> <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CounterView #negative</span><span class="dl">'</span> <span class="p">})</span>
      <span class="p">}</span>
      <span class="nc">Button</span><span class="p">(</span><span class="s2">`toggle </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">toggle</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">;</span>
        <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>On first render, the <strong>CounterView</strong> (label: <strong>‘CounterView #positive’</strong>) child component is created. This child component carries the @State decorated variable, named <strong>counter</strong>. When the <strong>CounterView.counter</strong> state variable is updated, the <strong>CounterView</strong> (label: <strong>‘CounterView #positive’</strong>) child component is re-rendered, with its state variable value preserved. When the value of the <strong>MainView.toggle</strong> state variable changes to <strong>false</strong>, the <strong>if</strong> statement inside the <strong>MainView</strong> parent component gets updated, and subsequently the <strong>CounterView</strong> (label: <strong>‘CounterView #positive’</strong>) child component is removed. At the same time, a new <strong>CounterView</strong> (label: <strong>‘CounterView #negative’</strong>) child component is created, with the <strong>counter</strong> state variable set to the initial value <strong>0</strong>.</p> <p>Here is a preview of the example:</p> <div style="text-align:center"> <img src="./images/image-basic/image29.png" width="50%" /> </div> <blockquote> <p><strong>NOTE</strong></p> <p><strong>CounterView</strong> (label: <strong>‘CounterView #positive’</strong>) and <strong>CounterView</strong> (label: <strong>‘CounterView #negative’</strong>) are two distinct instances of the same custom component. When the <strong>if</strong> branch changes, there is no update to an existing child component or no preservation of state.</p> </blockquote> <p>The following example shows the required modifications if the value of <strong>counter</strong> needs to be preserved when the <strong>if</strong> condition changes:</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">CounterView</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Link</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">label</span><span class="p">:</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">unknown</span><span class="dl">'</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
      <span class="nc">Button</span><span class="p">(</span><span class="s2">`counter </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">counter</span><span class="p">}</span><span class="s2"> +1`</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">MainView</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">toggle</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">counter</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">CounterView</span><span class="p">({</span> <span class="na">counter</span><span class="p">:</span> <span class="nx">$counter</span><span class="p">,</span> <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CounterView #positive</span><span class="dl">'</span> <span class="p">})</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nc">CounterView</span><span class="p">({</span> <span class="na">counter</span><span class="p">:</span> <span class="nx">$counter</span><span class="p">,</span> <span class="na">label</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CounterView #negative</span><span class="dl">'</span> <span class="p">})</span>
      <span class="p">}</span>
      <span class="nc">Button</span><span class="p">(</span><span class="s2">`toggle </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">toggle</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">;</span>
        <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Here, the @State decorated variable <strong>counter</strong> is owned by the parent component. Therefore, it is not destroyed when a <strong>CounterView</strong> component instance is destroyed. The <strong>CounterView</strong> component refers to the state by an @Link decorator. The state must be moved from a child to its parent (or parent of parent) to avoid losing it when the conditional content (or repeated content) is destroyed.</p> <h3 id="foreach-rendering-of-repeated-content"> <a href="#foreach-rendering-of-repeated-content" class="anchor-heading" aria-labelledby="foreach-rendering-of-repeated-content"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ForEach: Rendering of Repeated Content </h3> <p><strong>ForEach</strong> enables rendering of repeated content based on array type data. It must be used in a container component, and the component it returns must be one allowed inside the container component. For example, for rendering of list items, <strong>ForEach</strong> must be used in the <strong>&lt;List&gt;</strong> component.</p> <blockquote> <p><strong>NOTE</strong></p> <p>This API is supported in ArkTS widgets since API version 9.</p> </blockquote> <h4 id="interface-description"> <a href="#interface-description" class="anchor-heading" aria-labelledby="interface-description"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Interface Description </h4> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ForEach</span><span class="p">(</span>
  <span class="nx">arr</span><span class="p">:</span> <span class="nb">Array</span><span class="p">,</span>
  <span class="nx">itemGenerator</span><span class="p">:</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">index</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">,</span>
  <span class="nx">keyGenerator</span><span class="p">?:</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nb">Object</span><span class="p">,</span> <span class="nx">index</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">string</span>
<span class="p">)</span>
</code></pre></div></div> <p>The parameters are described in the table below.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Mandatory</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>arr</td> <td>Array&lt;Object&gt;</td> <td>Yes</td> <td>Data source, which is an array.<br /><strong>NOTE</strong><br />- You can set this parameter to an empty array. In this case, no child component is created.<br />- You can also set this parameter to a function whose return value is an array, for example, <strong>arr.slice (1, 3)</strong>. However, the set function cannot change any state variables including the array itself. For example, <strong>Array.splice</strong>, <strong>Array.sort</strong>, and <strong>Array.reverse</strong> functions are not allowed, as they may change the array.</td> </tr> <tr> <td>itemGenerator</td> <td><code class="language-plaintext highlighter-rouge">(item: Object, index: number) =&gt; void</code></td> <td>Yes</td> <td>Component generator.<br />- It generates a component for each data item in an array. <br />- <strong>item</strong>: data item in the <strong>arr</strong> array.<br />- (Optional) <strong>index</strong>: index of the data item in the <strong>arr</strong> array.<br /><strong>NOTE</strong><br />- The type of the created component must be the one allowed inside the parent container component of <strong>ForEach</strong>. For example, a <strong>&lt;ListItem&gt;</strong> component is allowed only when the parent container component of <strong>ForEach</strong> is <strong>&lt;List&gt;</strong>.</td> </tr> <tr> <td>keyGenerator</td> <td><code class="language-plaintext highlighter-rouge">(item: Object, index: number) =&gt; string</code></td> <td>No</td> <td>Key generator.<br />- It generates a unique and persistent key for each array item of the data source <strong>arr</strong>. The return value is the key generation rule you customize.<br />- <strong>item</strong>: data item in the <strong>arr</strong> array.<br />- (Optional) <strong>index</strong>: index of the data item in the <strong>arr</strong> array.<br /><strong>NOTE</strong><br />- If this function is not specified, the default key generator of the framework is used: <strong>(item: T, index: number) =&gt; { return index + ‘__’ + JSON.stringify(item); }</strong>.<br />- The key generator should not change any component state.</td> </tr> </tbody> </table></div> <blockquote> <p><strong>NOTE</strong></p> <ul> <li>The <strong>itemGenerator</strong> function can contain an <strong>if/else</strong> statement, and an <strong>if/else</strong> statement can contain <strong>ForEach</strong>.</li> <li>On initial rendering, <strong>ForEach</strong> loads all data of the data source, creates a component for each data item, and mounts the created components to the render tree. If the data source contains a large number of items or performance is a critical concern, you are advised to use <strong>LazyForEach</strong>.</li> </ul> </blockquote> <h4 id="key-generation-rules"> <a href="#key-generation-rules" class="anchor-heading" aria-labelledby="key-generation-rules"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Key Generation Rules </h4> <ul> <li>During <strong>ForEach</strong> rendering, the system generates a unique, persistent key for each array item to identify the corresponding component. When the key changes, the ArkUI framework considers that the array element has been replaced or modified and creates a new component based on the new key. <br /></li> <li><strong>ForEach</strong> provides a parameter named <strong>keyGenerator</strong>, which is in effect a function through which you can customize key generation rules. If no <strong>keyGenerator</strong> function is defined, the ArkUI framework uses the default key generator, that is, <strong>(item: Object, index: number) =&gt; { return index + ‘__’ + JSON.stringify(item); }</strong>. <br /></li> <li>The ArkUI framework has a set of specific judgment rules for <strong>ForEach</strong> key generation, which are mainly associated with the second parameter <strong>index</strong> of the <strong>itemGenerator</strong> function and the second parameter <strong>index</strong> of the <strong>keyGenerator</strong> function. The following figure shows the logic of the key generation rules. <br /></li> </ul> <blockquote> <p><strong>NOTE</strong></p> <p>The ArkUI framework warns of duplicate keys. If duplicate keys exist during UI re-rendering, the framework may not work properly.</p> </blockquote> <h4 id="component-creation-rules"> <a href="#component-creation-rules" class="anchor-heading" aria-labelledby="component-creation-rules"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Component Creation Rules </h4> <p>After the key generation rules are determined, the <strong>itemGenerator</strong> function – the second parameter in <strong>ForEach</strong> – creates a component for each array item of the data source based on the rules. There are two cases for creating a component: <a href="#initial-rendering">initial rendering</a> and <a href="#non-initial-rendering">non-initial rendering</a>.</p> <h5 id="initial-rendering"> <a href="#initial-rendering" class="anchor-heading" aria-labelledby="initial-rendering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Initial Rendering </h5> <p>When used for initial rendering, <strong>ForEach</strong> generates a unique key for each array item of the data source based on the key generation rules, and creates a component.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Parent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">simpleList</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">];</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">ForEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">simpleList</span><span class="p">,</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nc">ChildItem</span><span class="p">({</span> <span class="na">item</span><span class="p">:</span> <span class="nx">item</span> <span class="p">})</span>
        <span class="p">},</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xF1F3F5</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ChildItem</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Prop</span> <span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The figure below shows the effect.</p> <p><strong>Figure 1</strong> Initial rendering when the ForEach data sources do not have the same key</p> <div style="text-align:center"> <img src="./images/image-basic/image30.png" width="50%" /> </div> <p>In the preceding code snippets, the key generation rule is the return value <strong>item</strong> of the <strong>keyGenerator</strong> function. During <strong>ForEach</strong> rendering, keys (<strong>one</strong>, <strong>two</strong>, and <strong>three</strong>) are generated in sequence for data source array items, and corresponding child items are created and rendered to the UI.</p> <p>When the keys generated for different data items are the same, the behavior of the framework is unpredictable. For example, in the following code, when data items with the same key <strong>two</strong> are rendered by <strong>ForEach</strong>, only one <strong>ChildItem</strong> component, instead of multiple components with the same key, is created.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="p">@</span><span class="nd">Entry</span>
 <span class="p">@</span><span class="nd">Component</span>
 <span class="nx">struct</span> <span class="nx">Parent</span> <span class="p">{</span>
   <span class="p">@</span><span class="nd">State</span> <span class="nx">simpleList</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">];</span>
 
   <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
     <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
       <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
         <span class="nc">ForEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">simpleList</span><span class="p">,</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
           <span class="nc">ChildItem</span><span class="p">({</span> <span class="na">item</span><span class="p">:</span> <span class="nx">item</span> <span class="p">})</span>
         <span class="p">},</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">)</span>
       <span class="p">}</span>
       <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
       <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
     <span class="p">}</span>
     <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
     <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xF1F3F5</span><span class="p">)</span>
   <span class="p">}</span>
 <span class="p">}</span>
 
 <span class="p">@</span><span class="nd">Component</span>
 <span class="nx">struct</span> <span class="nx">ChildItem</span> <span class="p">{</span>
   <span class="p">@</span><span class="nd">Prop</span> <span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
 
   <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
     <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span>
       <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
   <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div></div> <p>The figure below shows the effect.</p> <p><strong>Figure 2</strong> Initial rendering when the ForEach data sources have the same key</p> <div style="text-align:center"> <img src="./images/image-basic/image31.png" width="50%" /> </div> <p>In this example, the final key value generation rule is <strong>item</strong>. When <strong>ForEach</strong> traverses the data source <strong>simpleList</strong> and finds the key <strong>two</strong> whose index is <strong>1</strong>, <strong>ForEach</strong> creates a component whose key is <strong>two</strong> based on the final key value generation rule and marks the component. When <strong>ForEach</strong> finds the key <strong>two</strong> whose index is <strong>2</strong>, it does not create a component, because the key of the current item is also <strong>two</strong> according to the final key generation rule.</p> <h5 id="non-initial-rendering"> <a href="#non-initial-rendering" class="anchor-heading" aria-labelledby="non-initial-rendering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Non-Initial Rendering </h5> <p>When <strong>ForEach</strong> is used for re-rendering (non-initial rendering), it checks whether the newly generated key already exists in the previous rendering. If the key does not exist, a new component is created. If the key exists, no new component is created; instead, the component corresponding to the key is re-rendered. For example, in the following code snippet, the value of the third item of the array is changed to <strong>“new three”</strong> through the click event, which triggers <strong>ForEach</strong> to perform re-rendering.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Parent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">simpleList</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">one</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">two</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">];</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">Change Value of Third Array Item</span><span class="dl">'</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">Red</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">simpleList</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">new three</span><span class="dl">'</span><span class="p">;</span>
          <span class="p">})</span>

        <span class="nc">ForEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">simpleList</span><span class="p">,</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nc">ChildItem</span><span class="p">({</span> <span class="na">item</span><span class="p">:</span> <span class="nx">item</span> <span class="p">})</span>
            <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">top</span><span class="p">:</span> <span class="mi">20</span> <span class="p">})</span>
        <span class="p">},</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="p">.</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">Center</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xF1F3F5</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ChildItem</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Prop</span> <span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The figure below shows the effect.</p> <p><strong>Figure 3</strong> Re-rendering with ForEach</p> <div style="text-align:center"> <img src="./images/image-basic/v11.gif" width="50%" /> </div> <p>From this example, you can see that @State can observe changes in the primitive array items of the <strong>simpleList</strong> data source.</p> <ol> <li>When any array item in <strong>simpleList</strong> changes, <strong>ForEach</strong> is triggered for re-rendering.</li> <li><strong>ForEach</strong> traverses the new data source <strong>[‘one’, ‘two’, ‘new three’]</strong> and generates the corresponding keys <strong>one</strong>, <strong>two</strong>, and <strong>new three</strong>.</li> <li>Because keys <strong>one</strong> and <strong>two</strong> already exist in the previous rendering, <strong>ForEach</strong> reuses the corresponding components and re-renders them. For the third array item <strong>“new three”</strong>, because a new key <strong>new three</strong> is generated for it based on the key generation rule <strong>item</strong>, <strong>ForEach</strong> creates a new component for it.</li> </ol> <h4 id="use-cases"> <a href="#use-cases" class="anchor-heading" aria-labelledby="use-cases"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Cases </h4> <p><strong>ForEach</strong> is typically used in several cases:</p> <ul> <li><a href="#data-source-unchanged">data source unchanged</a></li> <li><a href="#data-source-changed">data source changed</a> (for example, when array items are inserted or deleted)</li> <li><a href="#properties-of-data-source-array-items-changed">properties of data source array items changed</a></li> </ul> <h5 id="data-source-unchanged"> <a href="#data-source-unchanged" class="anchor-heading" aria-labelledby="data-source-unchanged"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Source Unchanged </h5> <p>If the data source remains unchanged, it can of a primitive data type. For example, when a page is loading, the skeleton screen may be used.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ArticleList</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">simpleList</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">];</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">ForEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">simpleList</span><span class="p">,</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nc">ArticleSkeletonView</span><span class="p">()</span>
          <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">top</span><span class="p">:</span> <span class="mi">20</span> <span class="p">})</span>
      <span class="p">},</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nf">toString</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Builder</span>
<span class="kd">function</span> <span class="nf">textArea</span><span class="p">(</span><span class="nx">width</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="nx">Resource</span> <span class="o">|</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">,</span> <span class="nx">height</span><span class="p">:</span> <span class="kr">number</span> <span class="o">|</span> <span class="nx">Resource</span> <span class="o">|</span> <span class="kr">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">Row</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="nx">width</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="nx">height</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="dl">'</span><span class="s1">#FFF2F3F4</span><span class="dl">'</span><span class="p">)</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ArticleSkeletonView</span> <span class="p">{</span>
  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">textArea</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">right</span><span class="p">:</span> <span class="mi">20</span> <span class="p">})</span>

      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">textArea</span><span class="p">(</span><span class="dl">'</span><span class="s1">60%</span><span class="dl">'</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
        <span class="nf">textArea</span><span class="p">(</span><span class="dl">'</span><span class="s1">50%</span><span class="dl">'</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="p">.</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">HorizontalAlign</span><span class="p">.</span><span class="nx">Start</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">SpaceAround</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">borderRadius</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="dl">'</span><span class="s1">#FFECECEC</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">SpaceBetween</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The figure below shows the effect.</p> <p><strong>Figure 4</strong> Skeleton screen</p> <div style="text-align:center"> <img src="./images/image-basic/image32.png" width="50%" /> </div> <p>In this example, the data item <strong>item</strong> is used as the key generation rule. Because the array items of the data source <strong>simpleList</strong> are different, the uniqueness of the keys can be ensured.</p> <h5 id="data-source-changed"> <a href="#data-source-changed" class="anchor-heading" aria-labelledby="data-source-changed"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Source Changed </h5> <p>If data source array item changes, for example, when an array item is inserted or deleted, or has its index changed, the data source should be of the object array type, and a unique ID of the object is used as the final key. For example, after a pull-to-refresh gesture is performed, newly obtained data items are added to the tail of the data source array, resulting in an increase in the length of the data source array.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Article</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">brief</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">brief</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">title</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">brief</span> <span class="o">=</span> <span class="nx">brief</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ArticleListView</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">isListReachEnd</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">articleList</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">Article</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">001</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 1</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">002</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 2</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">003</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 3</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">004</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 4</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">005</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 5</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article </span><span class="p">(</span><span class="dl">'</span><span class="s1">006</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 6</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">]</span>

  <span class="nf">loadMoreArticles</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">articleList</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">007</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">New article</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">({</span> <span class="na">space</span><span class="p">:</span> <span class="mi">5</span> <span class="p">})</span> <span class="p">{</span>
      <span class="nc">List</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">ForEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">articleList</span><span class="p">,</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nx">Article</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nc">ListItem</span><span class="p">()</span> <span class="p">{</span>
            <span class="nc">ArticleCard</span><span class="p">({</span> <span class="na">article</span><span class="p">:</span> <span class="nx">item</span> <span class="p">})</span>
              <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">top</span><span class="p">:</span> <span class="mi">20</span> <span class="p">})</span>
          <span class="p">}</span>
        <span class="p">},</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nx">Article</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="p">.</span><span class="nf">onReachEnd</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">isListReachEnd</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="nf">parallelGesture</span><span class="p">(</span>
        <span class="nc">PanGesture</span><span class="p">({</span> <span class="na">direction</span><span class="p">:</span> <span class="nx">PanDirection</span><span class="p">.</span><span class="nx">Up</span><span class="p">,</span> <span class="na">distance</span><span class="p">:</span> <span class="mi">80</span> <span class="p">})</span>
          <span class="p">.</span><span class="nf">onActionStart</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isListReachEnd</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nf">loadMoreArticles</span><span class="p">();</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">isListReachEnd</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">})</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">scrollBar</span><span class="p">(</span><span class="nx">BarState</span><span class="p">.</span><span class="nx">Off</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xF1F3F5</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ArticleCard</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Prop</span> <span class="nx">article</span><span class="p">:</span> <span class="nx">Article</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Image</span><span class="p">(</span><span class="nf">$r</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.media.icon</span><span class="dl">'</span><span class="p">))</span>
        <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">right</span><span class="p">:</span> <span class="mi">20</span> <span class="p">})</span>

      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">bottom</span><span class="p">:</span> <span class="mi">8</span> <span class="p">})</span>
        <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">brief</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">Gray</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">bottom</span><span class="p">:</span> <span class="mi">8</span> <span class="p">})</span>
      <span class="p">}</span>
      <span class="p">.</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">HorizontalAlign</span><span class="p">.</span><span class="nx">Start</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">80%</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">borderRadius</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="dl">'</span><span class="s1">#FFECECEC</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">SpaceBetween</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The following figure shows the initial screen (on the left) and the screen after a pull-to-refresh gesture (on the right).</p> <p><strong>Figure 5</strong> When the data source is changed</p> <div style="text-align:center"> <img src="./images/image-basic/image33.png" width="50%" /> </div> <p>In this example, the <strong>ArticleCard</strong> component functions as a child component of the <strong>ArticleListView</strong> component and receives an <strong>Article</strong> object through the @Prop decorator to render article widgets.</p> <ol> <li>When the list scrolls to the bottom, if the distance of finger movement exceeds the threshold 80, the <strong>loadMoreArticle()</strong> function is triggered. This function adds a new data item to the tail of the <strong>articleList</strong> data source, increasing the length of the data source.</li> <li>Because the data source is decorated by @State, the ArkUI framework can detect the change of the data source length and trigger <strong>ForEach</strong> for re-rendering.</li> </ol> <h5 id="properties-of-data-source-array-items-changed"> <a href="#properties-of-data-source-array-items-changed" class="anchor-heading" aria-labelledby="properties-of-data-source-array-items-changed"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Properties of Data Source Array Items Changed </h5> <p>If the data source array items are of the Object type, property changes of these array items cannot be detected by the ArkUI framework, because the framework cannot detect property changes of array items of complex types when the array is decorated by @State. As a result, re-rendering by <strong>ForEach</strong> is not performed. To trigger <strong>ForEach</strong> to perform re-rendering, use the @Observed and @ObjectLink decorators. In the following example, clicking the Like icon on the article list changes the number of likes for an article.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Observed</span>
<span class="kd">class</span> <span class="nc">Article</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">brief</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">isLiked</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">likesCount</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">brief</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">isLiked</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">,</span> <span class="nx">likesCount</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">title</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">brief</span> <span class="o">=</span> <span class="nx">brief</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isLiked</span> <span class="o">=</span> <span class="nx">isLiked</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">likesCount</span> <span class="o">=</span> <span class="nx">likesCount</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ArticleListView</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">articleList</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">Article</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">001</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 0</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">002</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 1</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">003</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 2</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">004</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 4</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">005</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 5</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
    <span class="k">new</span> <span class="nc">Article</span><span class="p">(</span><span class="dl">'</span><span class="s1">006</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Article 6</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">Abstract</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
  <span class="p">];</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">List</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">ForEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">articleList</span><span class="p">,</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nx">Article</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nc">ListItem</span><span class="p">()</span> <span class="p">{</span>
          <span class="nc">ArticleCard</span><span class="p">({</span>
            <span class="na">article</span><span class="p">:</span> <span class="nx">item</span>
          <span class="p">})</span>
            <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">top</span><span class="p">:</span> <span class="mi">20</span> <span class="p">})</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nx">Article</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">scrollBar</span><span class="p">(</span><span class="nx">BarState</span><span class="p">.</span><span class="nx">Off</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="mh">0xF1F3F5</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ArticleCard</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">ObjectLink</span> <span class="nx">article</span><span class="p">:</span> <span class="nx">Article</span><span class="p">;</span>

  <span class="nf">handleLiked</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">isLiked</span> <span class="o">=</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">isLiked</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">likesCount</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">isLiked</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">likesCount</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">likesCount</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Image</span><span class="p">(</span><span class="nf">$r</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.media.icon</span><span class="dl">'</span><span class="p">))</span>
        <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">right</span><span class="p">:</span> <span class="mi">20</span> <span class="p">})</span>

      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">bottom</span><span class="p">:</span> <span class="mi">8</span> <span class="p">})</span>
        <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">brief</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontColor</span><span class="p">(</span><span class="nx">Color</span><span class="p">.</span><span class="nx">Gray</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">bottom</span><span class="p">:</span> <span class="mi">8</span> <span class="p">})</span>

        <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
          <span class="nc">Image</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">isLiked</span> <span class="p">?</span> <span class="nf">$r</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.media.iconLiked</span><span class="dl">'</span><span class="p">)</span> <span class="p">:</span> <span class="nf">$r</span><span class="p">(</span><span class="dl">'</span><span class="s1">app.media.iconUnLiked</span><span class="dl">'</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">margin</span><span class="p">({</span> <span class="na">right</span><span class="p">:</span> <span class="mi">8</span> <span class="p">})</span>
          <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">article</span><span class="p">.</span><span class="nx">likesCount</span><span class="p">.</span><span class="nf">toString</span><span class="p">())</span>
            <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nf">handleLiked</span><span class="p">())</span>
        <span class="p">.</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">Center</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="p">.</span><span class="nf">alignItems</span><span class="p">(</span><span class="nx">HorizontalAlign</span><span class="p">.</span><span class="nx">Start</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">80%</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">borderRadius</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">backgroundColor</span><span class="p">(</span><span class="dl">'</span><span class="s1">#FFECECEC</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">height</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">width</span><span class="p">(</span><span class="dl">'</span><span class="s1">100%</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">justifyContent</span><span class="p">(</span><span class="nx">FlexAlign</span><span class="p">.</span><span class="nx">SpaceBetween</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The following figure shows the initial screen (on the left) and the screen after the Like icon of Article 1 is clicked (on the right).</p> <p><strong>Figure 6</strong> When properties of data source array items are changed</p> <div style="text-align:center"> <img src="./images/image-basic/image34.png" width="50%" /> </div> <p>In this example, the <strong>Article</strong> class is decorated by the @Observed decorator. The parent component <strong>ArticleListView</strong> passes an <strong>Article</strong> object instance to the child component <strong>ArticleCard</strong>, and the child component uses the @ObjectLink decorator to receive the instance.</p> <ol> <li>When the Like icon of Article 1 is clicked, the <strong>handleLiked</strong> function of the <strong>ArticleCard</strong> component is triggered. This function changes the values of the <strong>isLiked</strong> and <strong>likesCount</strong> properties of the <strong>article</strong> instance in the component pertaining to Article 1.</li> <li>Because <strong>article</strong> in the child component <strong>ArticleCard</strong> uses the @ObjectLink decorator, the parent and child components share the same article data. As such, the values of <strong>isLiked</strong> and <strong>likedCounts</strong> of the first array item of <strong>articleList</strong> in the parent component are changed synchronously.</li> <li>When the parent component detects property changes of the data source array items, <strong>ForEach</strong> is triggered for re-rendering.</li> <li>Here, the <strong>ForEach</strong> key generation rule is the <strong>id</strong> property value of the array item. If <strong>ForEach</strong> traverses the new data source and finds no changes in the <strong>id</strong> values, no component is created.</li> <li>When the <strong>ArticleCard</strong> component corresponding to the first array item is rendered, the obtained values of <strong>isLiked</strong> and** likesCount** are the new values.</li> </ol> <h4 id="suggestions"> <a href="#suggestions" class="anchor-heading" aria-labelledby="suggestions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Suggestions </h4> <ul> <li>Avoid including the data item <strong>index</strong> in the final key generation rule to prevent unexpected rendering results and deteriorated rendering performance. If including <strong>index</strong> is required, for example, when the list needs to be rendered based on the index, prepare for the performance loss resulting from component creation by <strong>ForEach</strong> to account for data source changes.</li> <li>To ensure unique keys for array items of the Object type, you are advised to use the unique IDs of objects as keys.</li> <li>Data items of primitive data types do not have a unique ID. If you use the primitive data type itself as the key, you must ensure that the array items are not duplicate. In scenarios where the data source changes, you are advised to convert the array of a primitive data type into an array of the Object type with the <strong>id</strong> property, and then use the <strong>id</strong> property as the key generation rule.</li> </ul> <hr> <h2 class="text-delta">Table of contents</h2> <ul> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
