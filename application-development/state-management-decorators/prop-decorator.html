<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Prop Decorator | Oniro</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Prop Decorator" /> <meta property="og:locale" content="en_US" /> <meta property="og:site_name" content="Oniro" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Prop Decorator" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Prop Decorator","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/introduction-to-oniro/images/ONIRO-Masterbrand-horizontal.png"}},"url":"/application-development/state-management-decorators/prop-decorator.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="Oniro"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Eclipse Oniro Project category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/" class="nav-list-link">Eclipse Oniro Project</a><ul class="nav-list"><li class="nav-list-item"><a href="/introduction-to-oniro/introduction-to-oniro.html" class="nav-list-link">Introduction to Oniro</a></li><li class="nav-list-item"><a href="/introduction-to-oniro/oniro-architecture.html" class="nav-list-link">Oniro Architecture</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Application Development category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/" class="nav-list-link">Application Development</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Environment Setup Guide category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/environment-setup-config/" class="nav-list-link">Environment Setup Guide</a><ul class="nav-list"><li class="nav-list-item"> <a href="/application-development/environment-setup-config/system-requirement.html" class="nav-list-link">System Requirement</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/ide-installation.html" class="nav-list-link">IDE Installation</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/env-config.html" class="nav-list-link">Environment Configuration</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/full-public-sdk.html" class="nav-list-link">Full SDK & Public SDK</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/developer-account.html" class="nav-list-link">Developer Account</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/ohpm.html" class="nav-list-link">Introduction to OHPM</a> </li><li class="nav-list-item"> <a href="/application-development/environment-setup-config/common-issue.html" class="nav-list-link">Common Issues and Solutions</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Create Your First Eclipse Oniro Application category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/create-first-eclipse-oniro-app/" class="nav-list-link">Create Your First Eclipse Oniro Application</a><ul class="nav-list"><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/create-template.html" class="nav-list-link">Create an Eclipse Oniro app using OpenHarmony Template</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/find-project-files.html" class="nav-list-link">Find project files</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/use-previewer.html" class="nav-list-link">Usage of Previewer</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/build-first-page.html" class="nav-list-link">Build the First Page</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/build-second-page.html" class="nav-list-link">Build the Second Page</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/page-redirect.html" class="nav-list-link">Implementing Page Redirection</a> </li><li class="nav-list-item"> <a href="/application-development/create-first-eclipse-oniro-app/run-real-device.html" class="nav-list-link">Running the Application on a Real Device</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Basic Concepts category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/basic-concepts/" class="nav-list-link">Basic Concepts</a><ul class="nav-list"><li class="nav-list-item"> <a href="/application-development/basic-concepts/app-pack-structure.html" class="nav-list-link">Application Package Structure in Stage Model</a> </li><li class="nav-list-item"> <a href="/application-development/basic-concepts/introduction-to-arkts.html" class="nav-list-link">Introduction to ArkTS</a> </li><li class="nav-list-item"> <a href="/application-development/basic-concepts/arkui-introduction.html" class="nav-list-link">Introduction to ArkUI</a> </li><li class="nav-list-item"> <a href="/application-development/basic-concepts/uiability-and-component.html" class="nav-list-link">UIAbility and Component</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Resource Categories and Access category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/application-development/resource-categories-and-access/" class="nav-list-link">Resource Categories and Access</a><ul class="nav-list"></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Device Development category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/device-development/" class="nav-list-link">Device Development</a><ul class="nav-list"><li class="nav-list-item"><a href="/device-development/quick-build-with-oniro.html" class="nav-list-link">Building Oniro</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Oniro IDE category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/device-development/oniro-ide/" class="nav-list-link">Oniro IDE</a><ul class="nav-list"><li class="nav-list-item"> <a href="/device-development/oniro-ide/getting-started.html" class="nav-list-link">Getting Started</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/code-editing.html" class="nav-list-link">Code Editing</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/user-interface.html" class="nav-list-link">User Interface</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/code-navigation.html" class="nav-list-link">Code Navigation</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/refacting.html" class="nav-list-link">Refactoring</a> </li><li class="nav-list-item"> <a href="/device-development/oniro-ide/language-support.html" class="nav-list-link">Language Support</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Supported Devices category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/device-development/supported-device/" class="nav-list-link">Supported Devices</a><ul class="nav-list"><li class="nav-list-item"> <a href="/device-development/supported-device/boards/" class="nav-list-link">boards</a> </li><li class="nav-list-item"> <a href="/device-development/supported-device/virtual-machine/" class="nav-list-link">virtual machine</a> </li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Policies and Compliance category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/policies-and-compliance/" class="nav-list-link">Policies and Compliance</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/community/" class="nav-list-link">Community</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Oniro" aria-label="Search Oniro" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="">Introduction to ArkTS</a></li> <li class="breadcrumb-nav-list-item"><span>Prop Decorator</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="prop-decorator"> <a href="#prop-decorator" class="anchor-heading" aria-labelledby="prop-decorator"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> @Prop Decorator </h1> <p>One-way synchronization is supported between an <code class="language-plaintext highlighter-rouge">@Prop</code> decorated variable a variable of its parent component. This means that, an <code class="language-plaintext highlighter-rouge">@Prop</code> decorated variable is mutable, and its changes will not be synchronized to the parent component.</p> <h2 id="features"> <a href="#features" class="anchor-heading" aria-labelledby="features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Features </h2> <p>For the <code class="language-plaintext highlighter-rouge">@Prop</code> decorated variable of a child component, the change synchronization to the parent component is uni-directional.</p> <ul> <li> <p>An <code class="language-plaintext highlighter-rouge">@Prop</code> variable is allowed to be modified locally, but the change does not propagate back to its parent component.</p> </li> <li> <p>Whenever the data source changes, the <code class="language-plaintext highlighter-rouge">@Prop</code> decorated variable gets updated, and any locally made changes are overwritten. In other words, the change is synchronized from the parent component to the (owning) child component, but not the other way around.</p> </li> </ul> <h2 id="restrictions"> <a href="#restrictions" class="anchor-heading" aria-labelledby="restrictions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Restrictions </h2> <ul> <li> <p>When decorating variables, <code class="language-plaintext highlighter-rouge">@Prop</code> makes a deep copy, during which all types, except primitive types, Map, Set, Date, and Array, will be lost. For example, for complex types provided by N-API, such as <code class="language-plaintext highlighter-rouge">PixelMap</code>, because they are partially implemented in the native code, complete data cannot be obtained through a deep copy in ArkTS.</p> </li> <li> <p>The <code class="language-plaintext highlighter-rouge">@Prop</code> decorator cannot be used in custom components decorated by <code class="language-plaintext highlighter-rouge">@Entry</code>.</p> </li> </ul> <h2 id="use-scenarios"> <a href="#use-scenarios" class="anchor-heading" aria-labelledby="use-scenarios"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use Scenarios </h2> <h3 id="simple-type-sync-from-state-of-the-parent-component-to-prop-of-the-child-component"> <a href="#simple-type-sync-from-state-of-the-parent-component-to-prop-of-the-child-component" class="anchor-heading" aria-labelledby="simple-type-sync-from-state-of-the-parent-component-to-prop-of-the-child-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Simple Type Sync from @State of the Parent Component to @Prop of the Child Component </h3> <p>In this example, the <code class="language-plaintext highlighter-rouge">@Prop</code> decorated count variable in the <code class="language-plaintext highlighter-rouge">CountDownComponent</code> child component is initialized from the <code class="language-plaintext highlighter-rouge">@State</code> decorated <code class="language-plaintext highlighter-rouge">countDownStartValue</code> variable in the <code class="language-plaintext highlighter-rouge">ParentComponent</code>. When Try again is touched, the value of the count variable is modified, but the change remains within the <code class="language-plaintext highlighter-rouge">CountDownComponent</code> and does not affect the <code class="language-plaintext highlighter-rouge">ParentComponent</code>.</p> <p>Updating <code class="language-plaintext highlighter-rouge">countDownStartValue</code> in the <code class="language-plaintext highlighter-rouge">ParentComponent</code> will update the value of the <code class="language-plaintext highlighter-rouge">@Prop</code> decorated count.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">CountDownComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Prop</span> <span class="nx">count</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nl">costOfOneAttempt</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="s2">`You have </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="s2"> Nuggets left`</span><span class="p">)</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">Game over!</span><span class="dl">'</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="c1">// Changes to the @Prop decorated variables are not synchronized to the parent component.</span>
      <span class="nc">Button</span><span class="p">(</span><span class="s2">`Try again`</span><span class="p">).</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">count</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">costOfOneAttempt</span><span class="p">;</span>
      <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ParentComponent</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">countDownStartValue</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`Grant </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">countDownStartValue</span><span class="p">}</span><span class="s2"> nuggets to play.`</span><span class="p">)</span>
      <span class="c1">// Changes to the data source provided by the parent component are synchronized to the child component.</span>
      <span class="nc">Button</span><span class="p">(</span><span class="s2">`+1 - Nuggets in New Game`</span><span class="p">).</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">countDownStartValue</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">})</span>
      <span class="c1">// Updating the parent component will also update the child component.</span>
      <span class="nc">Button</span><span class="p">(</span><span class="s2">`-1  - Nuggets in New Game`</span><span class="p">).</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">countDownStartValue</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">})</span>

      <span class="nc">CountDownComponent</span><span class="p">({</span> <span class="na">count</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">countDownStartValue</span><span class="p">,</span> <span class="na">costOfOneAttempt</span><span class="p">:</span> <span class="mi">2</span> <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The display is previewed as the following:</p> <div style="text-align:center"> <img src="../basic-concepts/images/image-basic/image18.png" /> </div> <p>In the preceding example:</p> <ol> <li> <p>On initial render, when the <strong>CountDownComponent</strong> child component is created, its <code class="language-plaintext highlighter-rouge">@Prop</code> decorated <strong>count</strong> variable is initialized from the <code class="language-plaintext highlighter-rouge">@State</code> decorated <strong>countDownStartValue</strong> variable in the <strong>ParentComponent</strong>.</p> </li> <li> <p>When the “+1” or “-1” button is touched, the <code class="language-plaintext highlighter-rouge">@State</code> decorated <strong>countDownStartValue</strong> of the <strong>ParentComponent</strong> changes. This will cause the <strong>ParentComponent</strong> to re-render. At the minimum, the <strong>CountDownComponent</strong> will be updated because of the change in the <strong>count</strong> variable value.</p> </li> <li> <p>Because of the change in the <strong>count</strong> variable value, the <strong>CountDownComponent</strong> child component will re-render. At a minimum, the <strong>if</strong> statement’s condition (<strong>this.counter&gt; 0</strong>) is evaluated, and the <strong>&lt;Text&gt;</strong> child component inside the <strong>if</strong> statement would be updated.</p> </li> <li> <p>When <strong>Try again</strong> in the <strong>CountDownComponent</strong> child component is touched, the value of the <strong>count</strong> variable is modified, but the change remains within the child component and does not affect the <strong>countDownStartValue</strong> in the parent component.</p> </li> <li> <p>Updating <strong>countDownStartValue</strong> will overwrite the local value changes of the <code class="language-plaintext highlighter-rouge">@Prop</code> decorated <strong>count</strong> in the <strong>CountDownComponent</strong> child component.</p> </li> </ol> <h3 id="simple-type-prop-synced-from-state-array-item-in-parent-component"> <a href="#simple-type-prop-synced-from-state-array-item-in-parent-component" class="anchor-heading" aria-labelledby="simple-type-prop-synced-from-state-array-item-in-parent-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Simple Type @Prop Synced from @State Array Item in Parent Component </h3> <p>The <code class="language-plaintext highlighter-rouge">@State</code> decorated array an array item in the parent component can be used as data source to initialize and update a <code class="language-plaintext highlighter-rouge">@Prop</code> decorated variable. In the following example, the <code class="language-plaintext highlighter-rouge">@State</code> decorated array arr in the parent component Index initializes the <code class="language-plaintext highlighter-rouge">@Prop</code> decorated value variable in the child component Child.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Child</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Prop</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Text</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
      <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">++</span>
      <span class="p">})</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Index</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">arr</span><span class="p">:</span> <span class="kr">number</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
        <span class="nc">Child</span><span class="p">({</span> <span class="na">value</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">})</span>
        <span class="nc">Child</span><span class="p">({</span> <span class="na">value</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">})</span>
        <span class="nc">Child</span><span class="p">({</span> <span class="na">value</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">})</span>

        <span class="nc">Divider</span><span class="p">().</span><span class="nf">height</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="nc">ForEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">,</span>
          <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nc">Child</span><span class="p">({</span> <span class="na">value</span><span class="p">:</span> <span class="nx">item</span> <span class="p">})</span>
          <span class="p">},</span>
          <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nf">toString</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="nc">Text</span><span class="p">(</span><span class="dl">'</span><span class="s1">replace entire arr</span><span class="dl">'</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">fontSize</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
          <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="c1">// Both arrays contain item "3".</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">arr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">?</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
          <span class="p">})</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div style="text-align:center"> <img src="../basic-concepts/images/image-basic/image19.png" /> </div> <p>Initial render creates six instances of the <strong>Child</strong> component. Each <code class="language-plaintext highlighter-rouge">@Prop</code> decorated variable is initialized with a copy of an array item. The <strong>onclick</strong> event handler of the <strong>Child</strong> component changes the local variable value.</p> <p>Click <strong>1</strong> six times, <strong>2</strong> five times, and <strong>3</strong> four times on the page. The local values of all variables are then changed to <strong>7</strong>.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>7
7
7
----
7
7
7
</code></pre></div></div> <p>After <strong>replace entire arr</strong> is clicked, the following information is displayed:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3
4
5
----
7
4
5
</code></pre></div></div> <ul> <li> <p>Changes made in the <strong>Child</strong> component are not synchronized to the parent component <strong>Index</strong>. Therefore, even if the values of the six instances of the <strong>Child</strong> component are <strong>7</strong>, the value of <strong>this.arr</strong> in the <strong>Index</strong> component is still <strong>[1,2,3]</strong>.</p> </li> <li> <p>After <strong>replace entire arr</strong> is clicked, if <strong>this.arr[0] == 1</strong> is true, <strong>this.arr</strong> is set to <strong>[3, 4, 5]</strong>.</p> </li> <li> <p>Because <strong>this.arr[0]</strong> has been changed, the <strong>Child({value: this.arr[0]})</strong> component synchronizes the update of <strong>this.arr[0]</strong> to the instance’s @Prop decorated variable. The same happens for <strong>Child({value: this.arr[1]})</strong> and <strong>Child({value: this.arr[2]})</strong>.</p> </li> <li> <p>The change of <strong>this.arr</strong> causes <strong>ForEach</strong> to update: According to the diff algorithm, the array item with the ID <strong>3</strong> is retained in this update, array items with IDs <strong>1</strong> and <strong>2</strong> are deleted, and array items with IDs <strong>4</strong> and <strong>5</strong> are added. The array before and after the update is <strong>[1, 2, 3]</strong> and <strong>[3, 4, 5]</strong>, respectively. This implies that the <strong>Child</strong> instance generated for item <strong>3</strong> is moved to the first place, but not updated. In this case, the component value corresponding to <strong>3</strong> is <strong>7</strong>, and the final render result of <strong>ForEach</strong> is <strong>7</strong>, <strong>4</strong>, and <strong>5</strong>.</p> </li> </ul> <h3 id="class-object-type-prop-synced-from-state-class-object-property-in-parent-component"> <a href="#class-object-type-prop-synced-from-state-class-object-property-in-parent-component" class="anchor-heading" aria-labelledby="class-object-type-prop-synced-from-state-class-object-property-in-parent-component"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Class Object Type @Prop Synced from @State Class Object Property in Parent Component </h3> <p>In a library with one book and two readers, each reader can mark the book as read, and the marking does not affect the other reader. Technically speaking, local changes to the @Prop decorated book object do not sync back to the <code class="language-plaintext highlighter-rouge">@State</code> decorated book in the Library component.</p> <p>In this example, the <code class="language-plaintext highlighter-rouge">@Observed</code> decorator can be applied to the book class, but it is not mandatory. It is only needed for nested structures.</p> <div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Book</span> <span class="p">{</span>
  <span class="k">public</span> <span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="k">public</span> <span class="nx">pages</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="k">public</span> <span class="nx">readIt</span><span class="p">:</span> <span class="nx">boolean</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="nf">constructor</span><span class="p">(</span><span class="nx">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">pages</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">title</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pages</span> <span class="o">=</span> <span class="nx">pages</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">ReaderComp</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">Prop</span> <span class="nx">book</span><span class="p">:</span> <span class="nx">Book</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Book</span><span class="p">(</span><span class="dl">""</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Row</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">Text</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`...has</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">pages</span><span class="p">}</span><span class="s2"> pages!`</span><span class="p">)</span>
      <span class="nc">Text</span><span class="p">(</span><span class="s2">`...</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">readIt</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">I have read</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">I have not read it</span><span class="dl">'</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">onClick</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">book</span><span class="p">.</span><span class="nx">readIt</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="nd">Entry</span>
<span class="p">@</span><span class="nd">Component</span>
<span class="nx">struct</span> <span class="nx">Library</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">State</span> <span class="nx">book</span><span class="p">:</span> <span class="nx">Book</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Book</span><span class="p">(</span><span class="dl">'</span><span class="s1">100 secrets of C++</span><span class="dl">'</span><span class="p">,</span> <span class="mi">765</span><span class="p">);</span>

  <span class="nf">build</span><span class="p">()</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">()</span> <span class="p">{</span>
      <span class="nc">ReaderComp</span><span class="p">({</span> <span class="na">book</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">book</span> <span class="p">})</span>
      <span class="nc">ReaderComp</span><span class="p">({</span> <span class="na">book</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">book</span> <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The display is previewed as the following:</p> <div style="text-align:center"> <img src="../basic-concepts/images/image-basic/image20.png" /> </div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
